
<!DOCTYPE HTML>
<html lang="zh-hans" >
    <head>
        <meta charset="UTF-8">
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <title>单元测试文档 · Tools Collections</title>
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="description" content="">
        <meta name="generator" content="GitBook 3.2.3">
        <meta name="author" content="noobcoderr">
        
        
    
    
    <link rel="stylesheet" href="../gitbook/style.css">

    
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-mermaid-gb3/mermaid/mermaid.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-splitter/splitter.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-expandable-chapters/expandable-chapters.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-search-pro/search.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-code/plugin.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-back-to-top-button/plugin.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-highlight/website.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-fontsettings/website.css">
                
            
        

    

    
        
    
        
    
        
    
        
    
        
    
        
    


    

        
    
    
    <meta name="HandheldFriendly" content="true"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <link rel="apple-touch-icon-precomposed" sizes="152x152" href="../gitbook/images/apple-touch-icon-precomposed-152.png">
    <link rel="shortcut icon" href="../gitbook/images/favicon.ico" type="image/x-icon">

    
    

    </head>
    <body>
        
<div class="book">
    <div class="book-summary">
        
            
<div id="book-search-input" role="search">
    <input type="text" placeholder="输入并搜索" />
</div>

            
                <nav role="navigation">
                


<ul class="summary">
    
    

    

    
        
        
    
        <li class="chapter " data-level="1.1" data-path="../">
            
                <a href="../">
            
                    
                    Introduction
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2" >
            
                <span>
            
                    
                    合格的工程师
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.2.1" data-path="../engineer/unitTest.html">
            
                <a href="../engineer/unitTest.html">
            
                    
                    必要的单元测试
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.2" data-path="../engineer/streesTest.html">
            
                <a href="../engineer/streesTest.html">
            
                    
                    必要的压力测试
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.3" data-path="../engineer/codeStyle.html">
            
                <a href="../engineer/codeStyle.html">
            
                    
                    良好的代码规范
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.4" data-path="../engineer/subjDoc.html">
            
                <a href="../engineer/subjDoc.html">
            
                    
                    必要的项目文档
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.5" data-path="../engineer/codeReview.html">
            
                <a href="../engineer/codeReview.html">
            
                    
                    必要的代码审核(CodeReview)
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.3" >
            
                <span>
            
                    
                    知识源泉
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.3.1" data-path="../KnowledgeSource/StrongerBlog.html">
            
                <a href="../KnowledgeSource/StrongerBlog.html">
            
                    
                    大佬博客
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.2" data-path="../KnowledgeSource/BigCompanyBlog.html">
            
                <a href="../KnowledgeSource/BigCompanyBlog.html">
            
                    
                    大厂博客
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.3" data-path="../KnowledgeSource/BookLists.html">
            
                <a href="../KnowledgeSource/BookLists.html">
            
                    
                    我的书单
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.4" >
            
                <span>
            
                    
                    读书笔记
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.4.1" data-path="../ReadNotes/BeautyOfSoftwareEngineering/intro.html">
            
                <a href="../ReadNotes/BeautyOfSoftwareEngineering/intro.html">
            
                    
                    软件工程之美
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.4.1.1" data-path="../ReadNotes/BeautyOfSoftwareEngineering/BasicTheory.html">
            
                <a href="../ReadNotes/BeautyOfSoftwareEngineering/BasicTheory.html">
            
                    
                    基础理论
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.4.2" data-path="../ReadNotes/GoInAction/intro.html">
            
                <a href="../ReadNotes/GoInAction/intro.html">
            
                    
                    Go实战
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.5" >
            
                <span>
            
                    
                    DevOps
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.5.1" data-path="../DevOps/CI/CI.html">
            
                <a href="../DevOps/CI/CI.html">
            
                    
                    CI
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.2" >
            
                <span>
            
                    
                    CD
            
                </span>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.6" >
            
                <span>
            
                    
                    工具操作
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.6.1" data-path="../ToolsDoc/git/gitOp.html">
            
                <a href="../ToolsDoc/git/gitOp.html">
            
                    
                    git
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.2" data-path="../Tools/apiDoc/apidoc.md">
            
                <span>
            
                    
                    apiDoc
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.7" data-path="../ToolsDoc/gitbook/gitbookOp.html">
            
                <a href="../ToolsDoc/gitbook/gitbookOp.html">
            
                    
                    gitbook
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.7.1" data-path="../ToolsDoc/Goland/goland.html">
            
                <a href="../ToolsDoc/Goland/goland.html">
            
                    
                    Goland
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.2" data-path="../ToolsDoc/Markdown/Markdown.html">
            
                <a href="../ToolsDoc/Markdown/Markdown.html">
            
                    
                    Markdown
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.3" data-path="../ToolsDoc/SublimeText/sublimeText.html">
            
                <a href="../ToolsDoc/SublimeText/sublimeText.html">
            
                    
                    SublimeText
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.4" data-path="../ToolsDoc/GreatJs/greatJs.html">
            
                <a href="../ToolsDoc/GreatJs/greatJs.html">
            
                    
                    GreatJs
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.5" data-path="../ToolsDoc/SVN/svn.html">
            
                <a href="../ToolsDoc/SVN/svn.html">
            
                    
                    SVN
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.8" >
            
                <span>
            
                    
                    Mac操作指南
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.8.1" data-path="../macOperation/normalOperation.md">
            
                <span>
            
                    
                    常规Mac操作
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8.2" data-path="../macOperation/termOperation.md">
            
                <span>
            
                    
                    终端操作
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.9" >
            
                <span>
            
                    
                    个人网站
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.9.1" >
            
                <span>
            
                    
                    个人网站想法
            
                </span>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.10" >
            
                <span>
            
                    
                    工作遇到的
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.10.1" data-path="../work/redisLock.html">
            
                <a href="../work/redisLock.html">
            
                    
                    Redis锁
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.11" >
            
                <span>
            
                    
                    单元测试
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter active" data-level="1.11.1" data-path="utdoc.html">
            
                <a href="utdoc.html">
            
                    
                    单元测试文档
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.12" >
            
                <span>
            
                    
                    计算机科学
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.12.1" data-path="../CS/Heap&Stack.html">
            
                <a href="../CS/Heap&Stack.html">
            
                    
                    堆/栈
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

    

    <li class="divider"></li>

    <li>
        <a href="https://www.gitbook.com" target="blank" class="gitbook-link">
            本书使用 GitBook 发布
        </a>
    </li>
</ul>


                </nav>
            
        
    </div>

    <div class="book-body">
        
            <div class="body-inner">
                
                    

<div class="book-header" role="navigation">
    

    <!-- Title -->
    <h1>
        <i class="fa fa-circle-o-notch fa-spin"></i>
        <a href=".." >单元测试文档</a>
    </h1>
</div>




                    <div class="page-wrapper" tabindex="-1" role="main">
                        <div class="page-inner">
                            
<div id="book-search-results">
    <div class="search-noresults">
    
                                <section class="normal markdown-section">
                                
                                <p>&#x4EE5;&#x6211;&#x5728;&#x521A;&#x5199;&#x5355;&#x5143;&#x6D4B;&#x8BD5;&#x7ECF;&#x5386;&#x7684;&#x8FC7;&#x7A0B;&#x4E3A;&#x8DEF;&#x5F84;&#x8FDB;&#x884C;&#x5206;&#x4EAB;:happy:</p>
<h2 id="&#x5173;&#x4E8E;&#x5355;&#x5143;&#x6D4B;&#x8BD5;">&#x5173;&#x4E8E;&#x5355;&#x5143;&#x6D4B;&#x8BD5;</h2>
<h3 id="&#x4EC0;&#x4E48;&#x662F;&#x6D4B;&#x8BD5;&#xFF1F;">&#x4EC0;&#x4E48;&#x662F;&#x6D4B;&#x8BD5;&#xFF1F;</h3>
<p>&#x200B;    &#x6D4B;&#x8BD5;&#xFF0C;&#x5373;&#x5BF9;&#x5B8C;&#x6210;&#x7684;&#x5DE5;&#x4F5C;&#x8FDB;&#x884C;&#x529F;&#x80FD;&#x6B63;&#x786E;&#x6027;&#x68C0;&#x9A8C;&#x7684;&#x6D3B;&#x52A8;&#x3002;&#x8BE5;&#x68C0;&#x9A8C;&#x901A;&#x8FC7;&#x5BF9;&#x88AB;&#x6D4B;&#x5BF9;&#x8C61;&#x63D0;&#x4F9B;&#x5408;&#x6CD5;(&#x6B63;&#x5E38;&#x60C5;&#x51B5;&#xFF0C;&#x6781;&#x7AEF;&#x60C5;&#x51B5;&#xFF0C;&#x8FB9;&#x754C;&#x60C5;&#x51B5;)&#x4EE5;&#x53CA;&#x4E0D;&#x5408;&#x6CD5;&#x7684;&#x8F93;&#x5165;(&#x6240;&#x6709;&#x53EF;&#x80FD;&#x53D1;&#x751F;&#x7684;&#x60C5;&#x51B5;)&#xFF0C;&#x5E76;&#x901A;&#x8FC7;&#x6BD4;&#x8F83;&#x9884;&#x671F;&#x8F93;&#x51FA;&#x4E0E;&#x5B9E;&#x9645;&#x8F93;&#x51FA;&#x5185;&#x5BB9;&#x662F;&#x5426;&#x76F8;&#x7B49;&#x6216;&#x8005;&#x5728;&#x8BEF;&#x5DEE;&#x8303;&#x56F4;&#x5185;&#xFF0C;&#x6765;&#x8FBE;&#x5230;&#x68C0;&#x9A8C;&#x6B63;&#x786E;&#x6027;&#x7684;&#x76EE;&#x7684;&#x3002;&#x5355;&#x5143;&#x6D4B;&#x8BD5;&#x5C31;&#x662F;&#x5BF9;&#x4EE3;&#x7801;&#x7EC4;&#x7EC7;&#x7684;&#x6700;&#x5C0F;&#x5355;&#x5143;&#x8FDB;&#x884C;&#x7684;&#x6D4B;&#x8BD5;&#x3002;</p>
<h3 id="&#x4E3A;&#x4EC0;&#x4E48;&#x8981;&#x505A;&#x5355;&#x5143;&#x6D4B;&#x8BD5;&#x3002;">&#x4E3A;&#x4EC0;&#x4E48;&#x8981;&#x505A;&#x5355;&#x5143;&#x6D4B;&#x8BD5;&#x3002;</h3>
<p>&#x200B;    &#x4E3A;&#x4E86;&#x4FDD;&#x8BC1;&#x6211;&#x4EEC;&#x5199;&#x7684;&#x4EE3;&#x7801;&#x4E00;&#x76F4;(&#x5305;&#x62EC;&#x521D;&#x6B21;&#x5B8C;&#x6210;&#x4EE5;&#x53CA;&#x4E4B;&#x540E;&#x7684;&#x6240;&#x6709;&#x4FEE;&#x6539;)&#x662F;&#x529F;&#x80FD;&#x6B63;&#x786E;&#x7684;&#x3002;&#x4E00;&#x4E2A;&#x51FD;&#x6570;&#x5BF9;&#x5E94;&#x4E00;&#x4E2A;&#x529F;&#x80FD;&#xFF0C;&#x6240;&#x4EE5;&#x5F53;&#x5176;&#x5BF9;&#x5E94;&#x7684;&#x6D4B;&#x8BD5;&#x4EE3;&#x7801;&#x5B8C;&#x6210;&#x540E;&#xFF0C;&#x6240;&#x6709;&#x60C5;&#x51B5;&#x7684;&#x8F93;&#x5165;&#x90FD;&#x6709;&#x4E86;&#x9884;&#x671F;&#x7684;&#x8F93;&#x51FA;&#xFF0C;&#x5F53;&#x5BF9;&#x4EE3;&#x7801;&#x8FDB;&#x884C;&#x6539;&#x52A8;&#x540E;&#xFF0C;&#x5982;&#x679C;&#x5F97;&#x5230;&#x7684;&#x8F93;&#x51FA;&#x4E0D;&#x7B26;&#x5408;&#x6D4B;&#x8BD5;&#x4EE3;&#x7801;&#x7684;&#x9884;&#x671F;&#x8F93;&#x51FA;&#xFF0C;&#x90A3;&#x4E48;&#x8BF4;&#x660E;&#x6B64;&#x6B21;&#x4EE3;&#x7801;&#x7684;&#x6539;&#x52A8;&#x51FA;&#x4E86;&#x95EE;&#x9898;&#x3002;&#x5F53;&#x7136;&#xFF0C;&#x4E5F;&#x4E3A;&#x522B;&#x4EBA;&#x53EF;&#x4EE5;&#x5F88;&#x5FEB;&#x7684;&#x901A;&#x8FC7;&#x6D4B;&#x8BD5;&#x4EE3;&#x7801;&#x4E86;&#x89E3;&#x4EE3;&#x7801;&#x7684;&#x903B;&#x8F91;&#x4EE5;&#x53CA;&#x5B9E;&#x73B0;&#x7684;&#x529F;&#x80FD;&#x3002;&#x5C3D;&#x65E9;&#x53D1;&#x73B0;&#x95EE;&#x9898;&#x3001;bug&#x3002;</p>
<h3 id="&#x54EA;&#x4E9B;&#x4EE3;&#x7801;&#x9700;&#x8981;&#x8FDB;&#x884C;&#x5355;&#x5143;&#x6D4B;&#x8BD5;&#xFF1F;">&#x54EA;&#x4E9B;&#x4EE3;&#x7801;&#x9700;&#x8981;&#x8FDB;&#x884C;&#x5355;&#x5143;&#x6D4B;&#x8BD5;&#xFF1F;</h3>
<ul>
<li>&#x903B;&#x8F91;&#x590D;&#x6742;&#x7684;</li>
<li>&#x5BB9;&#x6613;&#x51FA;&#x9519;&#x7684;</li>
<li>&#x4E0D;&#x6613;&#x7406;&#x89E3;&#x7684;&#xFF0C;&#x5373;&#x8FC7;&#x6BB5;&#x65F6;&#x95F4;&#x81EA;&#x5DF1;&#x4E5F;&#x4F1A;&#x5FD8;&#x8BB0;&#x7684;&#xFF0C;&#x770B;&#x4E0D;&#x61C2;&#x7684;&#xFF0C;&#x5355;&#x5143;&#x6D4B;&#x8BD5;&#x4EE3;&#x7801;&#x6709;&#x52A9;&#x4E8E;&#x7406;&#x89E3;&#x4EE3;&#x7801;&#x7684;&#x529F;&#x80FD;&#x548C;&#x9700;&#x6C42;</li>
<li>&#x516C;&#x5171;&#x4EE3;&#x7801;&#x3002;&#x5927;&#x5BB6;&#x90FD;&#x4F1A;&#x8C03;&#x7528;&#x7684;&#x516C;&#x5171;&#x65B9;&#x6CD5;&#x7C7B;</li>
<li>&#x6838;&#x5FC3;&#x4E1A;&#x52A1;&#x4EE3;&#x7801;&#x3002;</li>
</ul>
<h3 id="&#x5355;&#x5143;&#x6D4B;&#x8BD5;&#x7684;&#x96BE;&#x70B9;">&#x5355;&#x5143;&#x6D4B;&#x8BD5;&#x7684;&#x96BE;&#x70B9;</h3>
<ul>
<li><p>&#x6D4B;&#x8BD5;&#x7C92;&#x5EA6;</p>
<p>&#x200B;    &#x7C92;&#x5EA6;&#x592A;&#x7EC6;&#xFF0C;&#x4F1A;&#x8017;&#x8D39;&#x5927;&#x91CF;&#x5F00;&#x53D1;&#x65F6;&#x95F4;&#x53CA;&#x7EF4;&#x62A4;&#x65F6;&#x95F4;&#xFF0C;&#x7C92;&#x5EA6;&#x592A;&#x7C97;&#xFF0C;&#x4E00;&#x4E2A;&#x6D4B;&#x8BD5;&#x51FD;&#x6570;&#x6D4B;&#x8BD5;&#x4E86;&#x5F88;&#x591A;&#x65B9;&#x6CD5;&#xFF0C;&#x5219;&#x663E;&#x5F97;&#x81C3;&#x80BF;&#xFF0C;&#x53D8;&#x6210;&#x4E86;&#x96C6;&#x6210;&#x6D4B;&#x8BD5;&#x3002;&#x5F53;&#x7136;&#x8FD9;&#x4E2D;&#x95F4;&#x6709;&#x4E2A;&#x5EA6;&#xFF0C;&#x8BE5;&#x5982;&#x4F55;&#x638C;&#x63E1;&#xFF0C;&#x5219;&#x8003;&#x9A8C;&#x6211;&#x4EEC;&#x79EF;&#x7D2F;&#x7684;&#x7ECF;&#x9A8C;&#x4E86;&#x3002;</p>
<p>&#x5982;&#x4E0B;&#x6D4B;&#x8BD5;&#x51FD;&#x6570;&#x6D4B;&#x8BD5;&#x4E86;&#x589E;&#x5220;&#x6539;&#x67E5;4&#x4E2A;&#x51FD;&#x6570;,&#x67E5;&#x8BE2;&#x51FD;&#x6570;&#x4F9D;&#x8D56;&#x4E8E;&#x63D2;&#x5165;&#x51FD;&#x6570;&#x5148;&#x5F80;&#x6570;&#x636E;&#x5E93;&#x4E2D;&#x63D2;&#x5165;&#x6570;&#x636E;</p>
<pre><code class="lang-go"><span class="hljs-keyword">func</span> TestAdvClientIdDao_AddCid(t *testing.T) {

   dao := &amp;AdvClientIdDao{}
   <span class="hljs-keyword">defer</span> dao.Close()
   client_id := <span class="hljs-string">&quot;ios_android&quot;</span>
   err := dao.UpsertClientId(client_id)
   assert.Empty(t, err)
   bean, err := dao.FindClientId(client_id)
   assert.Empty(t, err)
   assert.Equal(t, <span class="hljs-string">&quot;ios_android&quot;</span>, bean.ClientId)
   beans, _, err := dao.QueryCid(client_id, <span class="hljs-number">0</span>)
   assert.Empty(t, err)
   <span class="hljs-keyword">for</span> _, data := <span class="hljs-keyword">range</span> *beans {
      assert.Equal(t, <span class="hljs-string">&quot;ios_android&quot;</span>, data.ClientId)
   }
   err = dao.DeleteCid(client_id)
   assert.Empty(t, err)
}
</code></pre>
</li>
<li><p>&#x7834;&#x9664;&#x5916;&#x90E8;&#x4F9D;&#x8D56;(mock,stub&#x6280;&#x672F;)</p>
<p>&#x200B;    &#x5355;&#x5143;&#x6D4B;&#x8BD5;&#x4E00;&#x822C;&#x4E0D;&#x5141;&#x8BB8;&#x6709;&#x4EFB;&#x4F55;&#x5916;&#x90E8;&#x4F9D;&#x8D56;&#xFF08;&#x6587;&#x4EF6;&#x4F9D;&#x8D56;&#xFF0C;&#x7F51;&#x7EDC;&#x4F9D;&#x8D56;&#xFF0C;&#x6570;&#x636E;&#x5E93;&#x4F9D;&#x8D56;&#x7B49;&#xFF09;&#xFF0C;&#x6211;&#x4EEC;&#x4E0D;&#x4F1A;&#x5728;&#x6D4B;&#x8BD5;&#x4EE3;&#x7801;&#x4E2D;&#x53BB;&#x8FDE;&#x63A5;&#x6570;&#x636E;&#x5E93;&#xFF0C;&#x8C03;&#x7528;api&#x7B49;&#x3002;&#x8FD9;&#x4E9B;&#x5916;&#x90E8;&#x4F9D;&#x8D56;&#x5728;&#x6267;&#x884C;&#x6D4B;&#x8BD5;&#x7684;&#x65F6;&#x5019;&#x9700;&#x8981;&#x88AB;&#x6A21;&#x62DF;(mock/stub)&#x3002;&#x5728;&#x6D4B;&#x8BD5;&#x7684;&#x65F6;&#x5019;&#xFF0C;&#x6211;&#x4EEC;&#x4F7F;&#x7528;&#x6A21;&#x62DF;&#x7684;&#x5BF9;&#x8C61;&#x6765;&#x6A21;&#x62DF;&#x771F;&#x5B9E;&#x4F9D;&#x8D56;&#x4E0B;&#x7684;&#x5404;&#x79CD;&#x884C;&#x4E3A;&#x3002;&#x5982;&#x4F55;&#x8FD0;&#x7528;mock/stub&#x6765;&#x6A21;&#x62DF;&#x7CFB;&#x7EDF;&#x771F;&#x5B9E;&#x884C;&#x4E3A;&#x7B97;&#x662F;&#x5355;&#x5143;&#x6D4B;&#x8BD5;&#x9053;&#x8DEF;&#x4E0A;&#x7684;&#x4E00;&#x53EA;&#x62E6;&#x8DEF;&#x864E;&#x3002;</p>
<p>&#x200B;    &#x6709;&#x7684;&#x65F6;&#x5019;&#x6A21;&#x62DF;&#x662F;&#x6709;&#x6548;&#x7684;&#x65B9;&#x4FBF;&#x7684;&#x3002;&#x4F46;&#x6211;&#x4EEC;&#x8981;&#x63D0;&#x9632;&#x8FC7;&#x5EA6;&#x7684;mock/stub&#xFF0C;&#x56E0;&#x4E3A;&#x5176;&#x4F1A;&#x5BFC;&#x81F4;&#x5355;&#x5143;&#x6D4B;&#x8BD5;&#x4E3B;&#x8981;&#x5728;&#x6D4B;&#x6A21;&#x62DF;&#x5BF9;&#x8C61;&#x800C;&#x4E0D;&#x662F;&#x5B9E;&#x9645;&#x7684;&#x7CFB;&#x7EDF;&#x3002;</p>
</li>
</ul>
<h3 id="&#x5408;&#x683C;&#x7684;&#x5355;&#x5143;&#x6D4B;&#x8BD5;">&#x5408;&#x683C;&#x7684;&#x5355;&#x5143;&#x6D4B;&#x8BD5;</h3>
<ul>
<li>&#x6240;&#x6709;&#x72EC;&#x7ACB;&#x6267;&#x884C;&#x901A;&#x8DEF;&#x6D4B;&#x8BD5;&#xFF1A;&#x4FDD;&#x8BC1;&#x6BCF;&#x4E00;&#x884C;&#x4EE3;&#x7801;&#xFF0C;&#x6BCF;&#x4E2A;&#x5206;&#x652F;&#x90FD;&#x7ECF;&#x8FC7;&#x4E86;&#x6D4B;&#x8BD5;<ul>
<li>&#x4EE3;&#x7801;&#x8986;&#x76D6;&#x7387;<ul>
<li>&#x8BED;&#x53E5;&#x8986;&#x76D6;&#xFF1A;&#x4FDD;&#x8BC1;&#x6BCF;&#x4E00;&#x6761;&#x8BED;&#x53E5;&#x90FD;&#x6267;&#x884C;&#x5230;&#x4E86;</li>
<li>&#x5224;&#x5B9A;(&#x5206;&#x652F;)&#x8986;&#x76D6;&#xFF1A;&#x4FDD;&#x8BC1;&#x6BCF;&#x4E00;&#x4E2A;&#x5206;&#x652F;&#x90FD;&#x8986;&#x76D6;&#x5230;</li>
<li>&#x6761;&#x4EF6;&#x8986;&#x76D6;&#xFF1A;&#x4FDD;&#x8BC1;&#x6BCF;&#x4E00;&#x4E2A;&#x6761;&#x4EF6;&#x90FD;&#x8986;&#x76D6;&#x5230;(true/false)</li>
<li>&#x8DEF;&#x5F84;&#xFF1A;&#x4FDD;&#x8BC1;&#x6BCF;&#x4E00;&#x4E2A;&#x8DEF;&#x5F84;&#x90FD;&#x8986;&#x76D6;&#x5230;</li>
</ul>
</li>
</ul>
</li>
<li>&#x5404;&#x6761;&#x9519;&#x8BEF;&#x5904;&#x7406;&#x6761;&#x4EF6;&#x901A;&#x8DEF;&#x6D4B;&#x8BD5;&#xFF1A;&#x4FDD;&#x8BC1;&#x6BCF;&#x4E00;&#x4E2A;&#x5F02;&#x5E38;&#x90FD;&#x7ECF;&#x8FC7;&#x6D4B;&#x8BD5;</li>
<li>&#x8FB9;&#x754C;&#x6761;&#x4EF6;&#x6D4B;&#x8BD5;<ul>
<li>&#x53D8;&#x91CF;&#x6CA1;&#x6709;&#x8D4B;&#x503C;( &#x503C;&#x4E3A;nil )</li>
<li>&#x53D8;&#x91CF;&#x6570;&#x6570;&#x503C;<ul>
<li>&#x6B63;&#x5E38;&#x8FB9;&#x754C;&#xFF1A;&#x6700;&#x5C0F;&#x503C;&#x3001;&#x6700;&#x5927;&#x503C;&#x3001;&#x65E0;&#x7A77;&#x5927;</li>
<li>&#x4E34;&#x8FD1;&#x8FB9;&#x754C;&#xFF1A;&#x6BD4;&#x6700;&#x5C0F;&#x503C;&#x5927;1&#x3001;&#x6BD4;&#x6700;&#x5927;&#x503C;&#x5C0F;1</li>
<li>&#x6EA2;&#x51FA;&#x8FB9;&#x754C;&#xFF1A;&#x6BD4;&#x6700;&#x5927;&#x503C;&#x5927;1&#x3001;&#x6BD4;&#x6700;&#x5C0F;&#x503C;&#x5C0F;1</li>
</ul>
</li>
<li>&#x53D8;&#x91CF;&#x662F;&#x5B57;&#x7B26;&#x4E32;<ul>
<li>&#x7A7A;&#x5B57;&#x7B26;&#x4E32;</li>
<li>&#x5F15;&#x7528;&#x5B57;&#x7B26;&#x4E32;&#x8FB9;&#x754C;&#x7D22;&#x5F15; str [ len( str ) + 1 ]</li>
</ul>
</li>
<li>&#x53D8;&#x91CF;&#x6709;&#x89C4;&#x5F8B;</li>
</ul>
</li>
<li>&#x72EC;&#x7ACB;&#x6027;&#xFF0C;&#x6D4B;&#x8BD5;&#x7528;&#x4F8B;&#x7684;&#x7684;&#x6570;&#x636E;&#x4E0D;&#x4F9D;&#x8D56;&#x5176;&#x4ED6;&#x8F93;&#x51FA;&#xFF0C;&#x51CF;&#x5C11;&#x76F8;&#x4E92;&#x5F71;&#x54CD;&#x3002;</li>
</ul>
<h2 id="&#x5173;&#x4E8E;&#x6D4B;&#x8BD5;&#x7528;&#x4F8B;">&#x5173;&#x4E8E;&#x6D4B;&#x8BD5;&#x7528;&#x4F8B;</h2>
<h3 id="&#x6D4B;&#x8BD5;&#x7528;&#x4F8B;&#x7684;&#x60C5;&#x51B5;">&#x6D4B;&#x8BD5;&#x7528;&#x4F8B;&#x7684;&#x60C5;&#x51B5;</h3>
<p>&#x6D4B;&#x8BD5;&#x7528;&#x4F8B;&#x8981;&#x5C3D;&#x53EF;&#x80FD;&#x8986;&#x76D6;&#x65B9;&#x6CD5;&#x53EF;&#x80FD;&#x51FA;&#x73B0;&#x7684;&#x60C5;&#x51B5;&#xFF0C;&#x5E38;&#x89C1;&#x7684;&#x60C5;&#x51B5;&#x6709;&#xFF1A;</p>
<ul>
<li>&#x6B63;&#x5E38;&#x7528;&#x4F8B;&#xFF0C;&#x5373;&#x8D70;&#x6700;&#x591A;&#x6570;&#x60C5;&#x51B5;&#x7684;&#x6B63;&#x5E38;&#x6D4B;&#x8BD5;</li>
<li>&#x9519;&#x8BEF;&#x7528;&#x4F8B;&#xFF0C;&#x5373;&#x4F1A;&#x4EE4;&#x7A0B;&#x5E8F;&#x51FA;&#x73B0;&#x9519;&#x8BEF;&#x7684;&#x5206;&#x652F;</li>
<li>&#x5206;&#x652F;&#x7528;&#x4F8B;&#xFF0C;&#x5373;&#x591A;&#x4E2A;&#x5206;&#x652F;&#x7684;&#x60C5;&#x51B5;&#x90FD;&#x8981;&#x8003;&#x8651;&#x5230;&#x7684;&#x6D4B;&#x8BD5;</li>
<li>&#x8FB9;&#x754C;&#x503C;&#x7528;&#x4F8B;&#xFF0C;&#x5373;&#x8003;&#x8651;&#x8F93;&#x5165;&#x7684;&#x8FB9;&#x754C;&#x503C;&#x7684;&#x6D4B;&#x8BD5;</li>
</ul>
<h3 id="&#x6D4B;&#x8BD5;&#x7528;&#x4F8B;&#x7EC4;&#x7EC7;&#x6280;&#x5DE7;">&#x6D4B;&#x8BD5;&#x7528;&#x4F8B;&#x7EC4;&#x7EC7;&#x6280;&#x5DE7;</h3>
<p>&#x200B;    &#x8868;&#x683C;&#x9A71;&#x52A8;&#x6D4B;&#x8BD5; table driven </p>
<p>&#x200B;    &#x524D;&#x63D0;&#x662F;&#xFF1A;&#x8FD9;&#x4E00;&#x7CFB;&#x5217;&#x7684;&#x7528;&#x4F8B;&#x7684;&#x65AD;&#x8A00;&#x903B;&#x8F91;&#x90FD;&#x4E00;&#x6837;&#x3002;</p>
<pre><code class="lang-go"><span class="hljs-keyword">func</span> TestAdd(t, *testing.T){
   Caese := []<span class="hljs-keyword">struct</span>{
      name   <span class="hljs-keyword">string</span>
      first <span class="hljs-keyword">int</span>
      second <span class="hljs-keyword">int</span>
      expect <span class="hljs-keyword">int</span>
   }{
      <span class="hljs-comment">//&#x6B64;&#x5904;&#x586B;&#x5199;&#x591A;&#x6D4B;&#x8BD5;&#x7528;&#x4F8B;</span>
      {
         name:<span class="hljs-string">&quot;positiveNum&quot;</span>,
         first:<span class="hljs-number">1</span>,
         second:<span class="hljs-number">2</span>,
         expect:<span class="hljs-number">3</span>,
      },
      {
         name:<span class="hljs-string">&quot;negativeNum&quot;</span>,
         first:<span class="hljs-number">-1</span>,
         second:<span class="hljs-number">-2</span>,
         expect:<span class="hljs-number">-3</span>,
      },
   }
   <span class="hljs-comment">//&#x904D;&#x5386;&#x6267;&#x884C;&#x6D4B;&#x8BD5;&#x7528;&#x4F8B;</span>
   <span class="hljs-keyword">for</span> _,Case := <span class="hljs-keyword">range</span> Cases {
      t.Run(Case.name,<span class="hljs-keyword">func</span>(t *testing.T){
         actual := Add(Case.expect)
         assert.Equal(t,Case.expect,actual)
      })
   }
}
</code></pre>
<p>&#x200B;    &#x8FD9;&#x79CD;&#x7EC4;&#x7EC7;&#x65B9;&#x6CD5;&#x7684;&#x597D;&#x5904;&#x662F;&#x5C06;&#x5BB9;&#x6613;&#x53D8;&#x5316;&#x7684;&#x6D88;&#x606F;&#x548C;&#x4E0D;&#x5BB9;&#x6613;&#x53D8;&#x5316;&#x7684;&#x903B;&#x8F91;&#x5206;&#x79BB;&#xFF0C;&#x4F7F;&#x66F4;&#x52A0;&#x6E05;&#x6670;&#x548C;&#x7B80;&#x7EC3;&#xFF0C;&#x51CF;&#x5C11;&#x4E86;&#x590D;&#x5236;&#x7C98;&#x8D34;&#xFF0C;&#x5E76;&#x5927;&#x5927;&#x63D0;&#x9AD8;&#x7684;&#x6D4B;&#x8BD5;&#x4EE3;&#x7801;&#x7684;&#x53EF;&#x8BFB;&#x6027;&#x3002;</p>
<h2 id="&#x6210;&#x672C;&#x4EF7;&#x503C;">&#x6210;&#x672C;/&#x4EF7;&#x503C;</h2>
<p><img src="images/costs_benifits.png" alt=""></p>
<ul>
<li><p>&#x4F9D;&#x8D56;&#x5F88;&#x5C11;&#x7684;&#x7B80;&#x5355;&#x7684;&#x4EE3;&#x7801;(&#x5DE6;&#x4E0B;)</p>
</li>
<li><p>&#x4F9D;&#x8D56;&#x8F83;&#x591A;&#x4F46;&#x662F;&#x5F88;&#x7B80;&#x5355;&#x7684;&#x4EE3;&#x7801;(&#x53F3;&#x4E0B;)</p>
</li>
<li><p>&#x4F9D;&#x8D56;&#x5F88;&#x5C11;&#x7684;&#x590D;&#x6742;&#x4EE3;&#x7801;(&#x5DE6;&#x4E0A;)</p>
<p>&#x200B;    &#x72EC;&#x7ACB;&#x7684;&#x590D;&#x6742;&#x7B97;&#x6CD5;&#xFF08;&#x94F6;&#x884C;&#x5229;&#x606F;&#x8BA1;&#x7B97;&#xFF0C;&#x4FDD;&#x9669;&#x8D39;&#x7387;&#x8BA1;&#x7B97;&#xFF0C;TCP&#x534F;&#x8BAE;&#x89E3;&#x6790;&#x7B49;&#xFF09;&#xFF0C;&#x50CF;&#x8FD9;&#x4E00;&#x7C7B;&#x4EE3;&#x7801;&#x5916;&#x90E8;&#x4F9D;&#x8D56;&#x5F88;&#x5C11;&#xFF0C;&#x4F46;&#x5374;&#x5F88;&#x5BB9;&#x6613;&#x51FA;&#x9519;&#xFF0C;&#x5355;&#x5143;&#x6D4B;&#x8BD5;&#x6700;&#x6709;&#x4EF7;&#x503C;</p>
</li>
<li><p>&#x4F9D;&#x8D56;&#x5F88;&#x591A;&#x53C8;&#x5F88;&#x590D;&#x6742;(&#x53F3;&#x4E0A;)</p>
<p>&#x200B;    &#x50CF;&#x8FD9;&#x79CD;&#x4EE3;&#x7801;&#x6211;&#x4EEC;&#x5C3D;&#x91CF;&#x5728;&#x8BBE;&#x8BA1;&#x4E0A;&#x5C06;&#x5176;&#x5206;&#x4E3A;&#x4E24;&#x90E8;&#x5206;&#xFF1A;1.&#x5904;&#x7406;&#x590D;&#x6742;&#x7684;&#x903B;&#x8F91;&#x90E8;&#x5206; 2.&#x5904;&#x7406;&#x4F9D;&#x8D56;&#x90E8;&#x5206; &#x7136;&#x540E;1&#x90E8;&#x5206;&#x8FDB;&#x884C;&#x5355;&#x5143;&#x6D4B;&#x8BD5;</p>
</li>
</ul>
<h2 id="&#x5355;&#x5143;&#x6D4B;&#x8BD5;&#x7B2C;&#x4E00;&#x6B65;">&#x5355;&#x5143;&#x6D4B;&#x8BD5;&#x7B2C;&#x4E00;&#x6B65;</h2>
<h3 id="&#x4F9D;&#x8D56;">&#x4F9D;&#x8D56;</h3>
<p>&#x200B;    &#x6240;&#x8C13;&#x4F9D;&#x8D56;&#xFF0C;&#x5C31;&#x662F;A&#x51FD;&#x6570;&#x4E2D;&#x4F1A;&#x8C03;&#x7528;B&#xFF0C;&#x4F46;&#x662F;B&#x4E0D;&#x53D7;A&#x7684;&#x63A7;&#x5236;&#xFF0C;&#x53CD;&#x800C;&#x4F1A;&#x5F71;&#x54CD;A&#x7684;&#x8FDB;&#x7A0B;&#xFF0C;&#x5373;&#x5982;&#x679C;B&#x51FA;&#x9519;&#x4E86;&#xFF0C;&#x90A3;&#x4E48;&#x4F1A;&#x5BFC;&#x81F4;A&#x76F4;&#x63A5;&#x5931;&#x8D25;&#x3002;&#x5982;&#x4E0B;&#x51FD;&#x6570;&#x4E2D;HandlePush&#x4E2D;&#x7684;&#x4F9D;&#x8D56;&#x4E3A;rptdao&#x3002;</p>
<pre><code class="lang-go"><span class="hljs-keyword">type</span> AiClk <span class="hljs-keyword">struct</span> {
}

<span class="hljs-keyword">func</span> (this *AiClk) HandlePush(data mgotools.CallbackDataBean, extra <span class="hljs-keyword">map</span>[<span class="hljs-keyword">string</span>]<span class="hljs-keyword">string</span>, logger *utils.Logger) {
   <span class="hljs-comment">//...</span>
   <span class="hljs-comment">//&#x4FEE;&#x6539;&#x72B6;&#x6001;</span>
   rptdao := &amp;mgotools.EventReportDao{
      CloudId: data.CloudId,
   }
   <span class="hljs-keyword">defer</span> rptdao.Close()
   err = rptdao.FindAndModify(data.MuId, data.ClientId, data.AdvPlatform, extra)
   <span class="hljs-comment">//...</span>
}
</code></pre>
<h3 id="&#x8BC6;&#x522B;&#x7A0B;&#x5E8F;&#x4E2D;&#x7684;&#x5916;&#x90E8;&#x4F9D;&#x8D56;">&#x8BC6;&#x522B;&#x7A0B;&#x5E8F;&#x4E2D;&#x7684;&#x5916;&#x90E8;&#x4F9D;&#x8D56;</h3>
<p>&#x200B;    &#x5E38;&#x89C1;&#x7684;&#x5916;&#x90E8;&#x4F9D;&#x8D56;&#x6709;&#xFF1A;</p>
<ul>
<li>&#x7F51;&#x7EDC;&#x4F9D;&#x8D56;-&#x51FD;&#x6570;&#x6267;&#x884C;&#x4F9D;&#x8D56;&#x4E8E;&#x7F51;&#x7EDC;&#x8BF7;&#x6C42;&#xFF0C;&#x5982;&#x7B2C;&#x4E09;&#x65B9;http-api(&#x5F52;&#x56E0;&#x6570;&#x636E;&#x4E0A;&#x62A5;&#x5230;&#x5E7F;&#x544A;&#x5E73;&#x53F0;)&#x3001;&#x6D88;&#x606F;&#x961F;&#x5217;(&#x5339;&#x914D;&#x5230;&#x7684;&#x6570;&#x636E;&#x53D1;&#x5230;&#x6D88;&#x606F;&#x961F;&#x91CC;&#x91CC;&#x53BB;&#x5904;&#x7406;)&#x3001;rpc&#x7B49;</li>
<li>&#x6570;&#x636E;&#x5E93;&#x4F9D;&#x8D56;-&#x5404;&#x4E2A;&#x6570;&#x636E;&#x5E93;&#x7684;dao&#x7ED3;&#x6784;&#x4F53;</li>
<li>I/O&#x4F9D;&#x8D56;</li>
<li>&#x672A;&#x5B8C;&#x6210;&#x5F00;&#x53D1;&#x7684;&#x529F;&#x80FD;&#x6A21;&#x5757;</li>
</ul>
<h3 id="&#x5904;&#x7406;&#x65B9;&#x6CD5;">&#x5904;&#x7406;&#x65B9;&#x6CD5;</h3>
<blockquote>
<p>&#x62BD;&#x8C61;&#x6210;&#x63A5;&#x53E3;&#xFF0C;&#x901A;&#x8FC7;mock&#x548C;stub&#x8FDB;&#x884C;&#x6A21;&#x62DF;&#x6D4B;&#x8BD5;</p>
<p>A&#x4F9D;&#x8D56;B&#xFF0C; &#x6240;&#x4EE5;&#x8981;&#x5728;A&#x7684;&#x6784;&#x9020;&#x51FD;&#x6570;&#x91CC;&#x9762;&#x628A;B&#x4E22;&#x8FDB;&#x53BB;&#xFF0C;&#x800C;&#x4E0D;&#x662F;&#x5728;A&#x5185;&#x90E8;&#x751F;&#x6210;B&#x3002;</p>
<p>&#x200B;    &#x63A5;&#x53E3;&#x9700;&#x8981;&#x4EE5;&#x4F9D;&#x8D56;&#x6CE8;&#x5165;&#x7684;&#x65B9;&#x5F0F;&#x6CE8;&#x5165;&#x5230;&#x7ED3;&#x6784;&#x4F53;&#x4E2D;&#xFF0C;&#x8FD9;&#x6837;&#x624D;&#x80FD;&#x4E3A;&#x6D4B;&#x8BD5;&#x63D0;&#x4F9B;&#x66FF;&#x6362;&#x63A5;&#x53E3;&#x5B9E;&#x73B0;&#x7684;&#x53EF;&#x80FD;&#xFF0C;&#x6240;&#x8C13;&#x4F9D;&#x8D56;&#x6CE8;&#x5165;&#x4E3A;&#x4E00;&#x4E2A;&#x7C7B;&#x6216;&#x8005;&#x51FD;&#x6570;A&#xFF0C;&#x7528;&#x5230;&#x5185;&#x90E8;&#x5BF9;&#x8C61;B&#xFF0C;B&#x5728;A&#x7684;&#x5916;&#x90E8;&#x521B;&#x5EFA;&#xFF0C;&#x5F53;&#x8FD0;&#x884C;A&#x8C03;&#x7528;B&#x65F6;&#xFF0C;&#x901A;&#x8FC7;&#x67D0;&#x79CD;&#x65B9;&#x5F0F;&#x5C06;&#x5916;&#x90E8;&#x521B;&#x5EFA;&#x7684;B&#x7684;&#x5B9E;&#x4F8B;&#x8D4B;&#x7ED9;A&#x5185;&#x7684;B&#x3002;&#x8FD9;&#x6837;&#x5F53;A&#x8C03;&#x7528;B&#x65F6;&#xFF0C;B&#x5C31;&#x4F1A;&#x6309;&#x7167;&#x5916;&#x90E8;&#x5B9A;&#x4E49;&#x7684;&#x65B9;&#x5F0F;&#x53BB;&#x8FD0;&#x884C;&#x3002;</p>
<p>&#x200B;    &#x9664;&#x4E86;&#x4F9D;&#x8D56;&#x6CE8;&#x5165;&#xFF0C;&#x53E6;&#x4E00;&#x79CD;mock&#x5B9E;&#x73B0;&#x662F;&#x901A;&#x8FC7;go&#x8BED;&#x8A00;&#x7684;interface&#xFF0C;&#x88AB;mock&#x7684;&#x5BF9;&#x8C61;&#x9700;&#x8981;&#x7EE7;&#x627F;interface,&#x5E76;&#x5728;interface&#x4E2D;&#x5B9A;&#x4E49;&#x597D;&#x88AB;mock&#x5BF9;&#x8C61;&#x7684;&#x65B9;&#x6CD5;&#x3002;mock&#x5BF9;&#x8C61;&#x901A;&#x8FC7;&#x5B9E;&#x73B0;interface&#x7684;&#x6240;&#x6709;&#x65B9;&#x6CD5;&#x6765;&#x8868;&#x660E;&#x81EA;&#x5DF1;&#x5B9E;&#x73B0;&#x4E86;&#x8FD9;&#x4E2A;interface&#xFF0C;&#x8FD9;&#x6837;mock&#x5BF9;&#x8C61;&#x7684;&#x503C;&#x5C31;&#x53EF;&#x4EE5;&#x66FF;&#x6362;&#x88AB;mock&#x5BF9;&#x8C61;&#x7684;&#x503C;&#x3002;</p>
</blockquote>
<h2 id="mock">Mock</h2>
<p>&#x5F53;&#x6570;&#x636E;&#x5E93;&#x8FD8;&#x4E0D;&#x53EF;&#x7528;&#xFF0C;&#x6216;&#x8005;&#x65E0;&#x7F51;&#x7EDC;&#x8FDE;&#x63A5;&#xFF0C;&#x90A3;&#x4E48;&#x53EF;&#x4EE5;&#x901A;&#x8FC7;&#x6A21;&#x62DF;&#x8FD9;&#x4E9B;&#x4F9D;&#x8D56;&#x6765;&#x8FBE;&#x5230;&#x6D4B;&#x8BD5;&#x7A0B;&#x5E8F;&#x903B;&#x8F91;</p>
<p>Mock&#xFF1A;&#x5728;&#x6D4B;&#x8BD5;&#x5305;&#x4E2D;&#x521B;&#x5EFA;&#x4E00;&#x4E2A;&#x7ED3;&#x6784;&#x4F53;&#xFF0C;&#x6EE1;&#x8DB3;&#x67D0;&#x4E2A;&#x5916;&#x90E8;&#x4F9D;&#x8D56;&#x7684;&#x63A5;&#x53E3;</p>
<p>&#x200B;    mocks &#x5728;&#x6D4B;&#x8BD5;&#x65E0;&#x72B6;&#x6001;&#x51FD;&#x6570;&#x4E2D;&#x610F;&#x4E49;&#x4E0D;&#x5927;&#xFF0C;&#x5176;&#x5E94;&#x7528;&#x573A;&#x666F;&#x4E3B;&#x8981;&#x5728;&#x4E8E;&#x5904;&#x7406;&#x4E0D;&#x53EF;&#x63A7;&#x7684;&#x7B2C;&#x4E09;&#x65B9;&#x670D;&#x52A1;&#x3001;&#x6570;&#x636E;&#x5E93;&#x3001;&#x78C1;&#x76D8;&#x8BFB;&#x5199;&#x7B49;&#x3002;&#x5982;&#x679C;&#x8FD9;&#x4E9B;&#x670D;&#x52A1;&#x7684;&#x8C03;&#x7528;&#x7EC6;&#x8282;&#x5DF2;&#x7ECF;&#x88AB;&#x5C01;&#x88C5;&#x5230; interface &#x5185;&#x90E8;&#xFF0C;&#x8C03;&#x7528;&#x65B9;&#x53EA;&#x770B;&#x5230;&#x4E86; interface &#x5B9A;&#x4E49;&#x7684;&#x4E00;&#x7EC4;&#x65B9;&#x6CD5;&#xFF0C;&#x90A3;&#x4E48;&#x5728;&#x6D4B;&#x8BD5;&#x4E2D; mocks &#x5C31;&#x80FD;&#x63A7;&#x5236;&#x7B2C;&#x4E09;&#x65B9;&#x670D;&#x52A1;&#x8FD4;&#x56DE;&#x4EFB;&#x610F;&#x671F;&#x671B;&#x7684;&#x7ED3;&#x679C;&#xFF0C;&#x8FDB;&#x800C;&#x5B9E;&#x73B0;&#x5BF9;&#x8C03;&#x7528;&#x65B9;&#x903B;&#x8F91;&#x7684;&#x5168;&#x65B9;&#x4F4D;&#x6D4B;&#x8BD5;&#x3002;</p>
<h2 id="&#x4F7F;&#x7528;&#x4F9D;&#x8D56;&#x6CE8;&#x5165;&#x4F20;&#x9012;&#x63A5;&#x53E3;">&#x4F7F;&#x7528;&#x4F9D;&#x8D56;&#x6CE8;&#x5165;&#x4F20;&#x9012;&#x63A5;&#x53E3;</h2>
<p>&#x200B;    &#x5148;&#x770B;&#x4E00;&#x6BB5;&#x4EE3;&#x7801;</p>
<pre><code class="lang-go"><span class="hljs-keyword">type</span> AiClk <span class="hljs-keyword">struct</span> {
}

<span class="hljs-keyword">func</span> (this *AiClk) HandlePush(data mgotools.CallbackDataBean, extra <span class="hljs-keyword">map</span>[<span class="hljs-keyword">string</span>]<span class="hljs-keyword">string</span>, logger *utils.Logger) {
   <span class="hljs-comment">//...</span>
   <span class="hljs-comment">//&#x4FEE;&#x6539;&#x72B6;&#x6001;</span>
   rptdao := &amp;mgotools.EventReportDao{
      CloudId: data.CloudId,
   }
   <span class="hljs-keyword">defer</span> rptdao.Close()
   err = rptdao.FindAndModify(data.MuId, data.ClientId, data.AdvPlatform, extra)
   <span class="hljs-comment">//...</span>
}
</code></pre>
<p>&#x200B;    rptdao&#x5B8C;&#x5168;&#x5728;&#x5185;&#x90E8;&#x72EC;&#x7ACB;&#x5B9E;&#x73B0;&#xFF0C;&#x65E0;&#x6CD5;&#x64CD;&#x4F5C;&#x5176;&#x884C;&#x4E3A;&#x3002;&#x8FD9;&#x4F7F;&#x5F97;&#x6211;&#x4EEC;&#x7684;&#x6D4B;&#x8BD5;&#x5F88;&#x96BE;&#x53BB;&#x9664;&#x8FD9;&#x5757;&#x4F9D;&#x8D56;&#x3002;</p>
<p>&#x200B;    &#x5C06;&#x8BE5;&#x6570;&#x636E;&#x5E93;&#x4F9D;&#x8D56;&#x62BD;&#x8C61;&#x6210;&#x63A5;&#x53E3;&#x540E;</p>
<pre><code class="lang-go"><span class="hljs-keyword">type</span> RptDao <span class="hljs-keyword">interface</span>{
    FindAndModify(a,b,c <span class="hljs-keyword">string</span>,<span class="hljs-keyword">map</span>[<span class="hljs-keyword">string</span>]<span class="hljs-keyword">interface</span>{})
}
<span class="hljs-keyword">type</span> AiClk <span class="hljs-keyword">struct</span> {
        dao RptDao
}
<span class="hljs-comment">// NewAiclk, &#x901A;&#x8FC7;&#x6784;&#x9020;&#x51FD;&#x6570;&#x7684;&#x65B9;&#x5F0F;&#xFF0C;&#x5C06;RptDao&#x63A5;&#x53E3;&#x6CE8;&#x5165;</span>
<span class="hljs-keyword">func</span> NewAiclk(dao RptDao) *AiClk {
    <span class="hljs-keyword">return</span> &amp;AiClk{dao:dao}
}

<span class="hljs-keyword">func</span> (this *AiClk) HandlePush(data mgotools.CallbackDataBean, extra <span class="hljs-keyword">map</span>[<span class="hljs-keyword">string</span>]<span class="hljs-keyword">string</span>, logger *utils.Logger) {
  this.dao.FindAndModify()
}
</code></pre>
<p>dao&#x5728;&#x5916;&#x90E8;&#x5B9E;&#x73B0;&#xFF0C;&#x8FBE;&#x5230;&#x53EF;&#x4EE5;&#x63A7;&#x5236;&#x7684;&#x76EE;&#x7684;&#x3002;</p>
<h3 id="&#x603B;&#x7ED3;">&#x603B;&#x7ED3;</h3>
<p>&#x200B;    &#x5355;&#x6D4B;&#x7684;&#x4E3B;&#x8981;&#x6B65;&#x9AA4;</p>
<ul>
<li>&#x8BC6;&#x522B;&#x4F9D;&#x8D56;</li>
<li>&#x5C06;&#x4F9D;&#x8D56;&#x62BD;&#x8C61;&#x6210;&#x63A5;&#x53E3;</li>
<li>&#x4F7F;&#x7528;&#x4F9D;&#x8D56;&#x6CE8;&#x5165;&#x7684;&#x65B9;&#x5F0F;&#x5C06;&#x63A5;&#x53E3;&#x6CE8;&#x5165;</li>
</ul>
<h2 id="&#x63D0;&#x9AD8;&#x5DE5;&#x4F5C;&#x6548;&#x7387;&#xFF0C;&#x5355;&#x5143;&#x6D4B;&#x8BD5;&#x5DE5;&#x5177;testingtestifygomockhttptesthttpmock&#x63A5;&#x5165;">&#x63D0;&#x9AD8;&#x5DE5;&#x4F5C;&#x6548;&#x7387;&#xFF0C;&#x5355;&#x5143;&#x6D4B;&#x8BD5;&#x5DE5;&#x5177;(testing+testify+gomock+httptest+httpmock)&#x63A5;&#x5165;</h2>
<h3 id="testing"><a href="https://golang.org/pkg/testing/" target="_blank">testing</a></h3>
<p>Go&#x8BED;&#x8A00;&#x4E2D;&#x81EA;&#x5E26;&#x6709;&#x4E00;&#x4E2A;&#x8F7B;&#x91CF;&#x7EA7;&#x7684;&#x6D4B;&#x8BD5;&#x6846;&#x67B6;<code>testing</code>&#x548C;&#x81EA;&#x5E26;&#x7684;<code>go test</code>&#x547D;&#x4EE4;&#x6765;&#x5B9E;&#x73B0;&#x5355;&#x5143;&#x6D4B;&#x8BD5;&#x3002;&#x539F;&#x5219;&#xFF1A;</p>
<ul>
<li><p>&#x6587;&#x4EF6;&#x540D;&#x5FC5;&#x987B;&#x662F;<code>_test.go</code>&#x7ED3;&#x5C3E;&#x7684;&#xFF0C;&#x8FD9;&#x6837;&#x5728;&#x6267;&#x884C;<code>go test</code>&#x7684;&#x65F6;&#x5019;&#x624D;&#x4F1A;&#x6267;&#x884C;&#x5230;&#x76F8;&#x5E94;&#x7684;&#x4EE3;&#x7801;</p>
</li>
<li><p>&#x6D4B;&#x8BD5;&#x7528;&#x4F8B;&#x51FD;&#x6570;&#x5FC5;&#x987B;&#x662F;<code>Test</code>&#x5F00;&#x5934;</p>
</li>
<li>&#x6D4B;&#x8BD5;&#x51FD;&#x6570;<code>TestXxx()</code>&#x7684;&#x53C2;&#x6570;&#x662F;<code>testing.T</code></li>
</ul>
<h3 id="testify"><a href="https://github.com/stretchr/testify" target="_blank">testify</a></h3>
<p>&#x200B;    &#x5F15;&#x5165;&#x65AD;&#x8A00;&#x80FD;&#x4E3A;&#x6211;&#x4EEC;&#x63D0;&#x4F9B;&#x4FBF;&#x5229;&#x2014;&#x2014;&#x63D0;&#x9AD8;&#x6D4B;&#x8BD5;&#x6548;&#x7387;&#xFF0C;&#x589E;&#x5F3A;&#x4EE3;&#x7801;&#x53EF;&#x8BFB;&#x6027;.&#x5176;&#x4E2D;&#x6BCF;&#x4E2A;&#x65AD;&#x8A00;&#x51FD;&#x6570;&#x7B2C;&#x4E00;&#x4E2A;&#x53C2;&#x6570;&#x90FD;&#x4E3A;* testing.T&#x5BF9;&#x8C61;&#xFF0C;&#x8FD9;&#x6837;&#x6211;&#x4EEC;&#x624D;&#x53EF;&#x4EE5;&#x901A;&#x8FC7;&#x8BE5;&#x5BF9;&#x8C61;&#x8DDF;&#x8E2A;&#x6D4B;&#x8BD5;&#x4E2D;&#x51FA;&#x9519;&#x7684;&#x5730;&#x65B9;&#x3002;assert&#x5305;&#x51FA;&#x9519;&#x4E0D;&#x4F1A;&#x4E2D;&#x65AD;&#x6D4B;&#x8BD5;&#x7EE7;&#x7EED;&#x3002;</p>
<table>
<thead>
<tr>
<th>&#x65AD;&#x8A00;&#x8868;&#x8FBE;&#x5F0F;</th>
<th style="text-align:center">&#x63CF;&#x8FF0;</th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td>assert.Equal(t,a,b)</td>
<td style="text-align:center">&#x65AD;&#x8A00;&#x4F20;&#x5165;&#x7684;&#x9884;&#x671F;&#x503C;a&#x4E0E;&#x5B9E;&#x9645;&#x503C;b&#x662F;&#x76F8;&#x7B49;&#x7684;</td>
<td>assert.NotEqual()</td>
</tr>
<tr>
<td>assert.Nil(t,b)</td>
<td style="text-align:center">&#x5B9E;&#x9645;&#x503C;&#x4E3A;Nil</td>
<td>assert.NotNil(t,a)</td>
</tr>
<tr>
<td>assert.Empty(t,b)</td>
<td style="text-align:center">&#x5B9E;&#x9645;&#x503C;&#x4E3A;&#x7A7A;</td>
<td>assert.NotEmpty(t,a)</td>
</tr>
<tr>
<td>assert.Zero(t,b)</td>
<td style="text-align:center">&#x5B9E;&#x9645;&#x503C;&#x4E3A;0</td>
<td>assert.NotZero(t,a)</td>
</tr>
<tr>
<td>assert.True(t,b)</td>
<td style="text-align:center">&#x5B9E;&#x9645;&#x503C;&#x4E3A;true</td>
<td>assert.False(t,a)</td>
</tr>
<tr>
<td>assert.Error(t,b)</td>
<td style="text-align:center">&#x5B9E;&#x9645;&#x503C;&#x4E3A;false</td>
<td>assert.NoError()</td>
</tr>
<tr>
<td>assert.Regexp(t,rx,str)</td>
<td style="text-align:center">&#x80FD;&#x7528;rx&#x4ECE;str&#x4E2D;&#x5339;&#x914D;&#x5230;&#x6570;&#x636E;</td>
</tr>
</tbody>
</table>
<h3 id="gomock"><a href="https://github.com/golang/mock" target="_blank">gomock</a></h3>
<p>&#x200B;    google&#x5F00;&#x6E90;&#x7684;golang&#x6D4B;&#x8BD5;&#x6846;&#x67B6;&#xFF0C;&#x81EA;&#x52A8;&#x751F;&#x6210;mock&#x5BF9;&#x8C61;&#x3002;</p>
<p>&#x793A;&#x4F8B;&#xFF1A;</p>
<pre><code class="lang-go"><span class="hljs-keyword">package</span> gdtMock

<span class="hljs-keyword">type</span> GDTClk <span class="hljs-keyword">struct</span> {
   Operate    Operate
}

<span class="hljs-keyword">type</span> Operate <span class="hljs-keyword">interface</span> {
   <span class="hljs-comment">//&#x4E00;&#x7CFB;&#x5217;&#x67E5;&#x8BE2;&#x64CD;&#x4F5C;&#x7684;&#x65B9;&#x6CD5;&#x63A5;&#x53E3;&#xFF0C;&#x591A;&#x4E2A;&#x5E73;&#x53F0;&#x90FD;&#x4F1A;&#x7528;&#x5230;</span>
   Find()
   FindAndModify(a <span class="hljs-keyword">string</span>) <span class="hljs-keyword">string</span>
   Query()
   Delete()
}

<span class="hljs-keyword">func</span> NewGDTClk(op Operate) *GDTClk {
   <span class="hljs-keyword">if</span> op != <span class="hljs-literal">nil</span> {
      <span class="hljs-keyword">return</span> &amp;GDTClk{
         Operate:op,
      }
   } <span class="hljs-keyword">else</span> {
      <span class="hljs-keyword">return</span> &amp;GDTClk{
      }
   }
}

<span class="hljs-keyword">func</span> (gdt *GDTClk)HandlePush(a <span class="hljs-keyword">string</span>) <span class="hljs-keyword">string</span> {
   <span class="hljs-comment">//&#x5148;&#x6253;BI&#x65E5;&#x5FD7;</span>
   <span class="hljs-comment">//&#x66F4;&#x6539;&#x6570;&#x636E;&#x5E93;&#x72B6;&#x6001;</span>
   rst := gdt.Operate.FindAndModify(a)
   <span class="hljs-comment">//&#x8FDB;&#x884C;&#x4E0A;&#x62A5;&#x8BF7;&#x6C42;</span>
   <span class="hljs-keyword">return</span> rst
}
</code></pre>
<p>&#x4F7F;&#x7528;&#x6B65;&#x9AA4;&#xFF1A;</p>
<ol>
<li>&#x5C06;&#x60F3;&#x8981;mock&#x7684;&#x5BF9;&#x8C61;&#x62BD;&#x8C61;&#x6210;&#x63A5;&#x53E3;&#x540E;&#xFF0C;&#x901A;&#x8FC7;mockgen&#x547D;&#x4EE4;&#x81EA;&#x52A8;&#x751F;&#x6210;&#x76EE;&#x6807;&#x5BF9;&#x8C61;&#x7684;mock&#x5BF9;&#x8C61;</li>
</ol>
<pre><code>mockgen -source gdt.go -destination gdtMock.go -package gdtMock
</code></pre><p>  &#x8BE5;&#x547D;&#x4EE4;&#x5C06;gdt.go&#x5185;&#x90E8;&#x7684;&#x63A5;&#x53E3;interface{}&#x5168;&#x90E8;mock&#x51FA;mock&#x5BF9;&#x8C61;&#x5E76;&#x5B58;&#x50A8;&#x5728;gdtMock.go&#x6587;&#x4EF6;&#x4E2D;&#xFF0C;&#x6307;&#x5B9A;&#x5B58;&#x653E;mock&#x5BF9;&#x8C61;&#x7684;&#x5305;&#x540D;&#x4E3A;gdtMock&#xFF0C;&#x751F;&#x6210;&#x7684;&#x6587;&#x4EF6;&#x5185;&#x5BB9;&#x5982;&#x4E0B;&#xFF1A;</p>
<pre><code class="lang-go"><span class="hljs-comment">// Code generated by MockGen. DO NOT EDIT.</span>
<span class="hljs-comment">// Source: gdt.go</span>
<span class="hljs-comment">// Package gdtMock is a generated GoMock package.</span>
<span class="hljs-keyword">package</span> gdtMock
<span class="hljs-keyword">import</span> (
   gomock <span class="hljs-string">&quot;github.com/golang/mock/gomock&quot;</span>
   reflect <span class="hljs-string">&quot;reflect&quot;</span>
)
<span class="hljs-comment">// MockOperate is a mock of Operate interface</span>
<span class="hljs-keyword">type</span> MockOperate <span class="hljs-keyword">struct</span> {
   ctrl     *gomock.Controller
   recorder *MockOperateMockRecorder
}
<span class="hljs-comment">// MockOperateMockRecorder is the mock recorder for MockOperate</span>
<span class="hljs-keyword">type</span> MockOperateMockRecorder <span class="hljs-keyword">struct</span> {
   mock *MockOperate
}
<span class="hljs-comment">// NewMockOperate creates a new mock instance</span>
<span class="hljs-keyword">func</span> NewMockOperate(ctrl *gomock.Controller) *MockOperate {
   mock := &amp;MockOperate{ctrl: ctrl}
   mock.recorder = &amp;MockOperateMockRecorder{mock}
   <span class="hljs-keyword">return</span> mock
}
<span class="hljs-comment">// EXPECT returns an object that allows the caller to indicate expected use</span>
<span class="hljs-keyword">func</span> (m *MockOperate) EXPECT() *MockOperateMockRecorder {
   <span class="hljs-keyword">return</span> m.recorder
}
<span class="hljs-comment">// FindAndModify mocks base method</span>
<span class="hljs-keyword">func</span> (m *MockOperate) FindAndModify(a <span class="hljs-keyword">string</span>) <span class="hljs-keyword">string</span> {
   m.ctrl.T.Helper()
   ret := m.ctrl.Call(m, <span class="hljs-string">&quot;FindAndModify&quot;</span>, a)
   ret0, _ := ret[<span class="hljs-number">0</span>].(<span class="hljs-keyword">string</span>)
   <span class="hljs-keyword">return</span> ret0
}
<span class="hljs-comment">// FindAndModify indicates an expected call of FindAndModify</span>
<span class="hljs-keyword">func</span> (mr *MockOperateMockRecorder) FindAndModify(a <span class="hljs-keyword">interface</span>{}) *gomock.Call {
   mr.mock.ctrl.T.Helper()
   <span class="hljs-keyword">return</span> mr.mock.ctrl.RecordCallWithMethodType(mr.mock, <span class="hljs-string">&quot;FindAndModify&quot;</span>, reflect.TypeOf((*MockOperate)(<span class="hljs-literal">nil</span>).FindAndModify), a)
}
</code></pre>
<ol>
<li>&#x7F16;&#x5199;&#x6D4B;&#x8BD5;&#x4EE3;&#x7801;</li>
</ol>
<pre><code class="lang-go"><span class="hljs-keyword">func</span> TestGDTClk_HandlePush(t *testing.T) {
   <span class="hljs-comment">//mock&#x65F6;&#x5019;&#x7684;&#x6D4B;&#x8BD5;</span>
   ctrl := gomock.NewController(t)
   <span class="hljs-keyword">defer</span> ctrl.Finish()

   mockOp := NewMockOperate(ctrl)
   mockOp.EXPECT().FindAndModify(<span class="hljs-string">&quot;abc&quot;</span>).Return(<span class="hljs-string">&quot;success&quot;</span>)

   clk := NewGDTClk(mockOp)

   assert.Equal(t,<span class="hljs-string">&quot;success&quot;</span>,clk.HandlePush(<span class="hljs-string">&quot;abc&quot;</span>))
}
</code></pre>
<p>&#x8BED;&#x53E5;&#x8BF4;&#x660E;:</p>
<ol>
<li>gomock.NewController&#xFF1A;&#x8FD4;&#x56DE; <code>gomock.Controller</code>&#xFF0C;&#x5B83;&#x4EE3;&#x8868; mock &#x751F;&#x6001;&#x7CFB;&#x7EDF;&#x4E2D;&#x7684;&#x9876;&#x7EA7;&#x63A7;&#x4EF6;&#x3002;&#x5B9A;&#x4E49;&#x4E86; mock &#x5BF9;&#x8C61;&#x7684;&#x8303;&#x56F4;&#x3001;&#x751F;&#x547D;&#x5468;&#x671F;&#x548C;&#x671F;&#x5F85;&#x503C;&#x3002;&#x53E6;&#x5916;&#x5B83;&#x5728;&#x591A;&#x4E2A; goroutine &#x4E2D;&#x662F;&#x5B89;&#x5168;&#x7684;</li>
<li><p>ctrl.Finish()&#xFF1A;&#x8FDB;&#x884C; mock &#x7528;&#x4F8B;&#x7684;&#x671F;&#x671B;&#x503C;&#x65AD;&#x8A00;&#xFF0C;&#x4E00;&#x822C;&#x4F1A;&#x4F7F;&#x7528; <code>defer</code> &#x5EF6;&#x8FDF;&#x6267;&#x884C;&#xFF0C;&#x4EE5;&#x9632;&#x6B62;&#x6211;&#x4EEC;&#x5FD8;&#x8BB0;&#x8FD9;&#x4E00;&#x64CD;&#x4F5C;</p>
</li>
<li><p>mock.NewMockOperate&#xFF1A;&#x521B;&#x5EFA;&#x4E00;&#x4E2A;&#x65B0;&#x7684; mock &#x5B9E;&#x4F8B;</p>
</li>
<li><p>gomock.InOrder&#xFF1A;&#x58F0;&#x660E;&#x7ED9;&#x5B9A;&#x7684;&#x8C03;&#x7528;&#x5E94;&#x6309;&#x987A;&#x5E8F;&#x8FDB;&#x884C;&#xFF08;&#x662F;&#x5BF9; gomock.After &#x7684;&#x4E8C;&#x6B21;&#x5C01;&#x88C5;&#xFF09;</p>
</li>
<li><p>mockOp.EXPECT().FindAndModify().Return(nil)&#xFF1A;&#x8FD9;&#x91CC;&#x6709;&#x4E09;&#x4E2A;&#x6B65;&#x9AA4;&#xFF0C;<code>EXPECT()</code>&#x8FD4;&#x56DE;&#x4E00;&#x4E2A;&#x5141;&#x8BB8;&#x8C03;&#x7528;&#x8005;&#x8BBE;&#x7F6E;<strong>&#x671F;&#x671B;</strong>&#x548C;<strong>&#x8FD4;&#x56DE;&#x503C;</strong>&#x7684;&#x5BF9;&#x8C61;&#x3002;FindAndModify()<code>&#x662F;&#x8BBE;&#x7F6E;&#x5165;&#x53C2;&#x5E76;&#x8C03;&#x7528; mock &#x5B9E;&#x4F8B;&#x4E2D;&#x7684;&#x65B9;&#x6CD5;&#x3002;</code>Return(nil)` &#x662F;&#x8BBE;&#x7F6E;&#x5148;&#x524D;&#x8C03;&#x7528;&#x7684;&#x65B9;&#x6CD5;&#x51FA;&#x53C2;&#x3002;&#x7B80;&#x5355;&#x6765;&#x8BF4;&#xFF0C;&#x5C31;&#x662F;&#x8BBE;&#x7F6E;&#x5165;&#x53C2;&#x5E76;&#x8C03;&#x7528;&#xFF0C;&#x6700;&#x540E;&#x8BBE;&#x7F6E;&#x8FD4;&#x56DE;&#x503C;</p>
</li>
<li><p>NewGDTClk(mockOp)&#xFF1A;&#x521B;&#x5EFA; GDTClk&#x5B9E;&#x4F8B;&#xFF0C;&#x503C;&#x5F97;&#x6CE8;&#x610F;&#x7684;&#x662F;&#xFF0C;&#x5728;&#x8FD9;&#x91CC;<strong>&#x6CE8;&#x5165;&#x4E86; mock &#x5BF9;&#x8C61;</strong>&#xFF0C;&#x56E0;&#x6B64;&#x5B9E;&#x9645;&#x5728;&#x968F;&#x540E;&#x7684; <code>gdt.HandlePush</code> &#x8C03;&#x7528;&#x4E2D;&#x3002;&#x5B83;&#x8C03;&#x7528;&#x7684;&#x662F;&#x6211;&#x4EEC;&#x4E8B;&#x5148;&#x6A21;&#x62DF;&#x597D;&#x7684; mock &#x65B9;&#x6CD5;</p>
</li>
</ol>
<h3 id="&#x5E38;&#x7528;-mock-&#x65B9;&#x6CD5;">&#x5E38;&#x7528; mock &#x65B9;&#x6CD5;</h3>
<ul>
<li>Call.Do()&#xFF1A;&#x58F0;&#x660E;&#x5728;&#x5339;&#x914D;&#x65F6;&#x8981;&#x8FD0;&#x884C;&#x7684;&#x64CD;&#x4F5C;</li>
<li>Call.DoAndReturn()&#xFF1A;&#x58F0;&#x660E;&#x5728;&#x5339;&#x914D;&#x8C03;&#x7528;&#x65F6;&#x8981;&#x8FD0;&#x884C;&#x7684;&#x64CD;&#x4F5C;&#xFF0C;&#x5E76;&#x4E14;&#x6A21;&#x62DF;&#x8FD4;&#x56DE;&#x8BE5;&#x51FD;&#x6570;&#x7684;&#x8FD4;&#x56DE;&#x503C;</li>
<li>Call.MaxTimes()&#xFF1A;&#x8BBE;&#x7F6E;&#x6700;&#x5927;&#x7684;&#x8C03;&#x7528;&#x6B21;&#x6570;&#x4E3A; n &#x6B21;</li>
<li>Call.MinTimes()&#xFF1A;&#x8BBE;&#x7F6E;&#x6700;&#x5C0F;&#x7684;&#x8C03;&#x7528;&#x6B21;&#x6570;&#x4E3A; n &#x6B21;</li>
<li>Call.AnyTimes()&#xFF1A;&#x5141;&#x8BB8;&#x8C03;&#x7528;&#x6B21;&#x6570;&#x4E3A; 0 &#x6B21;&#x6216;&#x66F4;&#x591A;&#x6B21;</li>
<li>Call.Times()&#xFF1A;&#x8BBE;&#x7F6E;&#x8C03;&#x7528;&#x6B21;&#x6570;&#x4E3A; n &#x6B21;</li>
</ul>
<h4 id="&#x53C2;&#x6570;&#x5339;&#x914D;">&#x53C2;&#x6570;&#x5339;&#x914D;</h4>
<ul>
<li>gomock.Any()&#xFF1A;&#x5339;&#x914D;&#x4EFB;&#x610F;&#x503C;</li>
<li>gomock.Eq()&#xFF1A;&#x901A;&#x8FC7;&#x53CD;&#x5C04;&#x5339;&#x914D;&#x5230;&#x6307;&#x5B9A;&#x7684;&#x7C7B;&#x578B;&#x503C;&#xFF0C;&#x800C;&#x4E0D;&#x9700;&#x8981;&#x624B;&#x52A8;&#x8BBE;&#x7F6E;</li>
<li>gomock.Nil()&#xFF1A;&#x8FD4;&#x56DE; nil</li>
</ul>
<h3 id="httptest"><a href="https://golang.org/pkg/net/http/httptest/" target="_blank">httptest</a></h3>
<p>web&#x5F00;&#x53D1; handlerfunc&#x6D4B;&#x8BD5;&#x5229;&#x5668;</p>
<p>&#x5982;&#x679C;&#x9700;&#x8981;&#x6D4B;&#x8BD5;handlers&#x63A5;&#x53E3;&#x51FD;&#x6570;&#x7684;&#x8BDD;&#xFF0C;&#x4E3B;&#x8981;&#x53EF;&#x4EE5;&#x91C7;&#x7528;&#x4E24;&#x79CD;&#x65B9;&#x5F0F;&#x6765;&#x8FDB;&#x884C;&#x3002;</p>
<p>&#x7B2C;&#x4E00;&#x79CD;&#x662F;&#x90E8;&#x7F72;web server&#xFF0C;&#x7136;&#x540E;&#x901A;&#x8FC7;&#x6D4F;&#x89C8;&#x5668;&#x6216;&#x5176;&#x4ED6;http&#x8BF7;&#x6C42;&#x6A21;&#x62DF;&#x5DE5;&#x5177;&#x6765;&#x624B;&#x52A8;&#x6A21;&#x62DF;&#x771F;&#x5B9E;&#x7684;http&#x8BF7;&#x6C42;&#xFF0C;&#x53D1;&#x9001;http&#x8BF7;&#x6C42;&#x4E4B;&#x540E;&#xFF0C;&#x89E3;&#x6790;&#x8FD4;&#x56DE;&#x7684;&#x54CD;&#x5E94;&#xFF0C;&#x67E5;&#x770B;&#x54CD;&#x5E94;&#x662F;&#x5426;&#x7B26;&#x5408;&#x9884;&#x671F;&#xFF1B;&#x8FD9;&#x79CD;&#x505A;&#x6CD5;&#x6BD4;&#x8F83;&#x9EBB;&#x70E6;&#xFF0C;&#x800C;&#x4E14;&#x6D4B;&#x8BD5;&#x7ED3;&#x679C;&#x4E0D;&#x592A;&#x53EF;&#x9760;&#x3002;</p>
<p>&#x7B2C;&#x4E8C;&#x79CD;&#x662F;&#x4F7F;&#x7528;httptest&#x7ED3;&#x5408;testing&#x6765;&#x5B9E;&#x73B0;&#x9488;&#x5BF9;handlers&#x63A5;&#x53E3;&#x51FD;&#x6570;&#x7684;&#x5355;&#x5143;&#x6D4B;&#x8BD5;&#x3002;</p>
<pre><code class="lang-go"><span class="hljs-keyword">func</span> TestAiclkController_HandleCallback(t *testing.T) {
   URL := <span class="hljs-string">&quot;http://127.0.0.1:8080/report_ad_event/v1/aiclk/callback.json?cid=123&amp;os=1&amp;imei=__IMEI__&amp;imei_md5=__IMEIMD5&quot;</span> +
      <span class="hljs-string">&quot;__&amp;idfa=A1A5B766-712D-4267-B9B5-7CD9D1C86C30&amp;timestamp=12345&amp;callback_url=https%3a%2f%2fwww.test.com&amp;&quot;</span> +
      <span class="hljs-string">&quot;unit=1111&amp;plan=2222&amp;android_id=__ANDROIDID__&amp;uid=333&amp;params=YWN0TmFtZT11bml0X3Rlc3QmYWRzVHlwZT0wMDAmYXBw&quot;</span> +
      <span class="hljs-string">&quot;SWQ9MDAwJmNoYW5uZWw9dGVzdENoYW5uZWwmY2xpZW50SWQ9dHkudXQ=&quot;</span>
   req, err := http.NewRequest(<span class="hljs-string">&quot;GET&quot;</span>, URL, <span class="hljs-literal">nil</span>)
   <span class="hljs-keyword">if</span> err != <span class="hljs-literal">nil</span> {
      t.Fatal(err)
   }
   req.Header.Set(echo.HeaderContentType, echo.MIMEApplicationJSON)
   <span class="hljs-comment">// &#x6211;&#x4EEC;&#x521B;&#x5EFA;&#x4E00;&#x4E2A; ResponseRecorder (which satisfies http.ResponseWriter)&#x6765;&#x8BB0;&#x5F55;&#x54CD;&#x5E94;</span>
   rr := httptest.NewRecorder()

   ectest.ServeHTTP(rr, req)
   <span class="hljs-comment">// &#x68C0;&#x6D4B;&#x8FD4;&#x56DE;&#x7684;&#x72B6;&#x6001;&#x7801;</span>
   assert.Equal(t, <span class="hljs-number">200</span>, rr.Code)
   <span class="hljs-comment">// &#x68C0;&#x6D4B;&#x8FD4;&#x56DE;&#x7684;&#x6570;&#x636E;</span>
   assert.Regexp(t, regexp.MustCompile(<span class="hljs-string">`&quot;code&quot;:0`</span>), rr.Body.String())
}
</code></pre>
<p>&#x200B;    </p>
<h3 id="httpmock"><a href="https://github.com/jarcoal/httpmock" target="_blank">httpmock</a></h3>
<p>&#x200B;    httpmock&#x91C7;&#x7528;&#x6A21;&#x5F0F;&#x5339;&#x914D;&#x7684;&#x65B9;&#x6CD5;&#x5339;&#x914D;HTTP&#x8BF7;&#x6C42;&#x7684;URL&#xFF0C;&#x5728;&#x5339;&#x914D;&#x5230;&#x7279;&#x5B9A;&#x7684;&#x8BF7;&#x6C42;&#x65F6;&#x5C31;&#x4F1A;&#x8FD4;&#x56DE;&#x9884;&#x5148; &#x8BBE;&#x7F6E;&#x597D;&#x7684;&#x54CD;&#x5E94;&#x3002;</p>
<pre><code class="lang-go"><span class="hljs-keyword">func</span> (gdt *GDTClk)HandlePush(a <span class="hljs-keyword">string</span>) <span class="hljs-keyword">string</span> {
   <span class="hljs-comment">//&#x5148;&#x6253;BI&#x65E5;&#x5FD7;</span>

   <span class="hljs-comment">//&#x4F9D;&#x8D56;1&#xFF1A;&#x67E5;&#x5E93;&#x66F4;&#x6539;</span>
   rstDB := gdt.Operate.FindAndModify(a)
   <span class="hljs-keyword">if</span> rstDB == <span class="hljs-string">&quot;fail&quot;</span> {
      <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;fail&quot;</span>
   }
   fmt.Println(rstDB)

   <span class="hljs-comment">//&#x4F9D;&#x8D56;2&#xFF1A;&#x7EC4;&#x88C5;url&#x4E0A;&#x62A5;</span>
   URL := <span class="hljs-string">&quot;http://127.0.0.1:8080/report?params=a1b2c3d4e5f6&quot;</span>
   resp,err := http.Get(URL)
   <span class="hljs-keyword">defer</span> resp.Body.Close()
   <span class="hljs-keyword">if</span> err != <span class="hljs-literal">nil</span> {
      <span class="hljs-keyword">return</span> fmt.Sprintf(<span class="hljs-string">&quot;get err %v&quot;</span>,err)
   }
   <span class="hljs-keyword">if</span> resp.StatusCode != http.StatusOK {
      <span class="hljs-keyword">return</span> fmt.Sprintf(<span class="hljs-string">&quot;status code want 200 but get %v&quot;</span>,resp.StatusCode)
   }
   bodyBytes, _ := ioutil.ReadAll(resp.Body)
   rstHttp := <span class="hljs-built_in">new</span>(RetMsg)
   err = json.Unmarshal(bodyBytes, &amp;rstHttp)
   <span class="hljs-keyword">if</span> err != <span class="hljs-literal">nil</span> {
      logs.Error(<span class="hljs-string">&quot;decode data fail&quot;</span>)
      <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;umashal error&quot;</span>
   }
   fmt.Println(fmt.Sprintf(<span class="hljs-string">&quot;http mock %v&quot;</span>,rstHttp.Message))
   <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;success&quot;</span>

}
</code></pre>
<pre><code class="lang-go"><span class="hljs-keyword">func</span> TestFetchArticles(t *testing.T) {

    httpmock.Activate()
    <span class="hljs-keyword">defer</span> httpmock.DeactivateAndReset()

    httpmock.RegisterResponder(<span class="hljs-string">&quot;GET&quot;</span>, <span class="hljs-string">&quot;http://127.0.0.1:8080/report?params=a1b2c3d4e5f6&quot;</span>,
        httpmock.NewStringResponder(<span class="hljs-number">200</span>, <span class="hljs-string">`[{&quot;status&quot;: 801, &quot;message&quot;: &quot;invalid timestamp&quot;}]`</span>))

  <span class="hljs-comment">//RESTful&#x98CE;&#x683C;&#x7684;&#x6B63;&#x5219;&#x5339;&#x914D;</span>
    httpmock.RegisterResponder(<span class="hljs-string">&quot;GET&quot;</span>, <span class="hljs-string">`=~^https://api\.mybiz\.com/articles/id/\d+\z`</span>,
        httpmock.NewStringResponder(<span class="hljs-number">200</span>, <span class="hljs-string">`{&quot;status&quot;: 200, &quot;message&quot;: &quot;miss event_type&quot;}`</span>))

    <span class="hljs-comment">//HandlePush&#x7684;&#x5185;&#x90E8;&#x4F1A;&#x6709;http&#x8BF7;&#x6C42;&#xFF0C;&#x4F1A;&#x88AB;httpmock&#x6355;&#x83B7;&#xFF0C;&#x7136;&#x540E;&#x8FD4;&#x56DE;&#x8BBE;&#x7F6E;&#x597D;&#x7684;&#x54CD;&#x5E94;&#x5185;&#x5BB9;&#x3002;</span>
  rst := HandPush(<span class="hljs-string">&quot;&quot;</span>)
    assert.Equal(t,<span class="hljs-string">&quot;success&quot;</span>,rst)
}
</code></pre>
<p>&#x6B63;&#x5219;&#x5339;&#x914D;&#xFF0C;&#x5F53;&#x8BF7;&#x6C42;<code>http://127.0.0.1:8080/report?params=a1b2c3d4e5f6</code>&#x65F6;&#xFF0C;&#x4EE5;&#x4E0B;&#x5339;&#x914D;&#x5F0F;&#x53EF;&#x4EE5;&#x88AB;&#x6355;&#x83B7;&#xFF1A;</p>
<ul>
<li>&#x5B8C;&#x6574;&#x7684;&#x539F;&#x59CB;URL <code>http://127.0.0.1:8080/report?params=a1b2c3d4e5f6</code></li>
<li>&#x6CA1;&#x6709;&#x67E5;&#x8BE2;&#x53C2;&#x6570;&#x7684;  <code>http://127.0.0.1:8080/report</code></li>
<li>&#x6CA1;&#x6709;&#x534F;&#x8BAE;&#x548C;&#x57DF;&#x540D;  <code>/report?params=a1b2c3d4e5f6</code></li>
<li>&#x53EA;&#x6709;&#x8DEF;&#x5F84;  <code>/report</code></li>
<li>&#x5E26;&#x8BF7;&#x6C42;&#x53C2;&#x6570;&#x65F6;&#xFF0C;&#x53C2;&#x6570;&#x7ECF;&#x8FC7;&#x6392;&#x5E8F;&#x3002;<code>b=1&amp;a=2 =&gt;  a=2&amp;b=1</code></li>
</ul>
<h3 id="&#x542F;&#x793A;">&#x542F;&#x793A;</h3>
<p>&#x200B;    &#x8981;&#x5199;&#x6613;&#x6D4B;&#x7684;&#x4EE3;&#x7801;&#x3002;&#x9694;&#x79BB;&#x597D;&#x4F9D;&#x8D56;&#x3002;&#x4F7F;&#x7528;&#x63A5;&#x53E3;interface&#x3001;&#x901A;&#x8FC7;&#x590D;&#x5408;(&#x5D4C;&#x5165;)&#x6784;&#x9020;&#x9AD8;&#x5C42;&#x63A5;&#x53E3;,&#x4E66;&#x5199;&#x4F18;&#x96C5;&#x7684;golang&#x4EE3;&#x7801;&#x3002;</p>
<p>&#x200B;    interface{}&#x4E3B;&#x8981;&#x5E94;&#x7528;&#x5728;&#x5F53;&#x4E00;&#x4E2A;&#x51FD;&#x6570;&#x5904;&#x7406;&#x591A;&#x79CD;&#x7ED3;&#x6784;&#x4F53;&#x65F6;&#xFF0C;&#x5C06;&#x53C2;&#x6570;&#x8BBE;&#x7F6E;&#x4E3A;interface{},&#x6216;&#x8005;&#x4E00;&#x4E2A;&#x5305;&#x542B;&#x67D0;&#x4E9B;&#x65B9;&#x6CD5;&#x7684;interface&#xFF0C;&#x90A3;&#x4E48;&#x5B9E;&#x73B0;&#x4E86;&#x53C2;&#x6570;&#x8BBE;&#x7F6E;&#x7684;&#x63A5;&#x53E3;&#x7684;&#x5176;&#x4ED6;&#x7C7B;&#x578B;&#x5C31;&#x53EF;&#x4EE5;&#x4F20;&#x8FDB;&#x6765;&#x4E86;&#x3002;&#x5728;&#x5185;&#x90E8;&#x8FDB;&#x884C;&#x7C7B;&#x578B;&#x65AD;&#x8A00;&#x5C31;&#x53EF;&#x4EE5;&#x8C03;&#x7528;&#x5BF9;&#x5E94;&#x7684;&#x65B9;&#x6CD5;&#x4E86;&#x3002;</p>
<p>&#x200B;    &#x53C2;&#x8003;&#x4EE3;&#x7801;&#xFF0C;&#x5E7F;&#x544A;&#x4E0A;&#x62A5;&#x670D;&#x52A1;&#x4E2D;<code>src/adsmatch/module.go</code>&#x5185;204&#x884C; <code>ad.(AdsModel).HandlePush(result, ExtraSDK, logger)</code>,&#x6BCF;&#x4E2A;&#x6E20;&#x9053;&#x90FD;&#x5B9E;&#x73B0;&#x4E86;AdsModel&#x63A5;&#x53E3;&#xFF0C;&#x5219;&#x6B64;&#x65F6;&#x901A;&#x8FC7;&#x7C7B;&#x578B;&#x65AD;&#x8A00;&#x5C31;&#x53EF;&#x4EE5;&#x5F97;&#x5230;&#x5176;&#x5B58;&#x50A8;&#x7684;&#x5177;&#x4F53;&#x7C7B;&#x578B;&#x7684;&#x503C;&#x4E86;&#x3002;</p>
<h3 id="&#x62D3;&#x5C55;">&#x62D3;&#x5C55;</h3>
<ul>
<li>stub redis</li>
<li>stub MySQL</li>
<li>DI&#x4F9D;&#x8D56;&#x6CE8;&#x5165;&#x3002;</li>
</ul>
<h3 id="&#x5355;&#x5143;&#x6D4B;&#x8BD5;&#x7684;beforeafter">&#x5355;&#x5143;&#x6D4B;&#x8BD5;&#x7684;before/after</h3>
<ul>
<li>before&#xFF1A;&#x8FDB;&#x884C;&#x5355;&#x5143;&#x6D4B;&#x8BD5;&#x65F6;&#xFF0C;&#x5F88;&#x91CD;&#x8981;&#x7684;&#x4E00;&#x70B9;&#x662F;&#x4FDD;&#x8BC1;&#x4E4B;&#x524D;&#x6D4B;&#x8BD5;&#x7684;&#x9057;&#x7559;&#x6570;&#x636E;&#x6216;&#x8005;&#x5B9E;&#x4F8B;&#x5F97;&#x5230;&#x9500;&#x6BC1;&#xFF0C;&#x65B0;&#x6D4B;&#x8BD5;&#x7684;&#x72B6;&#x6001;&#x662F;&#x91CD;&#x5EFA;&#x7684;&#xFF0C;&#x5C31;&#x597D;&#x50CF;&#x4E4B;&#x524D;&#x6CA1;&#x6709;&#x6D4B;&#x8BD5;&#x8FD0;&#x884C;&#x8FC7;&#x4E00;&#x6837;&#x3002;</li>
</ul>
<h3 id="&#x4E3A;&#x4EC0;&#x4E48;&#x8981;mock">&#x4E3A;&#x4EC0;&#x4E48;&#x8981;mock</h3>
<p>&#x200B;    &#x4E00;&#x65E6;&#x6D4B;&#x8BD5;&#x4F9D;&#x8D56;&#x4E86;&#x6587;&#x4EF6;&#x7CFB;&#x7EDF;&#xFF0C;&#x4F60;&#x8FDB;&#x884C;&#x7684;&#x5C31;&#x662F;&#x96C6;&#x6210;&#x6D4B;&#x8BD5;&#xFF0C;&#x5E26;&#x6765;&#x4E86;&#x6240;&#x6709;&#x96C6;&#x6210;&#x6D4B;&#x8BD5;&#x76F8;&#x5173;&#x7684;&#x95EE;&#x9898;&#x2014;&#x2014;&#x2014;&#x2014;&#x8FD0;&#x884C;&#x901F;&#x5EA6;&#x6162;&#xFF0C;&#x9700;&#x8981;&#x914D;&#x7F6E;&#x7B49;&#x7B49;</p>
<h3 id="&#x533A;&#x5206;&#x5355;&#x5143;&#x6D4B;&#x8BD5;&#x548C;&#x96C6;&#x6210;&#x6D4B;&#x8BD5;">&#x533A;&#x5206;&#x5355;&#x5143;&#x6D4B;&#x8BD5;&#x548C;&#x96C6;&#x6210;&#x6D4B;&#x8BD5;</h3>
<p>   &#x4EFB;&#x4F55;&#x6D4B;&#x8BD5;&#xFF0C;&#x5982;&#x679C;&#x5B83;&#x8FD0;&#x884C;&#x901F;&#x5EA6;&#x4E0D;&#x5FEB;&#xFF0C;&#x7ED3;&#x679C;&#x4E0D;&#x7A33;&#x5B9A;&#xFF0C;&#x6216;&#x8005;&#x8981;&#x7528;&#x5230;&#x88AB;&#x6D4B;&#x8BD5;&#x5355;&#x5143;&#x7684;&#x4E00;&#x4E2A;&#x6216;&#x591A;&#x4E2A;&#x771F;&#x5B9E;&#x4F9D;&#x8D56;&#x7269;&#xFF0C;&#x6211;&#x5C31;&#x8BA4;&#x4E3A;&#x5B83;&#x662F;&#x96C6;&#x6210;&#x6D4B;&#x8BD5;&#x3002;<strong>&#x96C6;&#x6210;&#x6D4B;&#x8BD5;</strong>&#x662F;&#x5BF9;&#x4E00;&#x4E2A;&#x5DE5;&#x4F5C;&#x5355;&#x5143;&#x8FDB;&#x884C;&#x7684;&#x6D4B;&#x8BD5;&#xFF0C;&#x8FD9;&#x4E2A;&#x6D4B;&#x8BD5;&#x5BF9;&#x88AB;&#x6D4B;&#x8BD5;&#x7684;&#x5DE5;&#x4F5C;&#x5355;&#x5143;&#x6CA1;&#x6709;&#x5B8C;&#x5168;&#x7684;&#x63A7;&#x5236;&#xFF0C;&#x5E76;&#x4F7F;&#x7528;&#x8BE5;&#x5355;&#x5143;&#x7684;&#x4E00;&#x4E2A;&#x6216;&#x591A;&#x4E2A;&#x771F;&#x5B9E;&#x4F9D;&#x8D56;&#x7269;&#xFF0C;&#x4F8B;&#x5982;&#x4E8B;&#x4EF6;&#x3001;&#x7F51;&#x7EDC;&#x3001;&#x6570;&#x636E;&#x5E93;&#x3001;&#x7EBF;&#x7A0B;&#x6216;&#x968F;&#x673A;&#x6570;&#x4EA7;&#x751F;&#x5668;&#x7B49;&#x3002;</p>
<h2 id="&#x53C2;&#x8003;&#x6587;&#x732E;&#x6216;&#x535A;&#x5BA2;&#xFF1A;">&#x53C2;&#x8003;&#x6587;&#x732E;&#x6216;&#x535A;&#x5BA2;&#xFF1A;</h2>
<h3 id="golang&#x4EE3;&#x7801;&#x4E66;&#x5199;&#x89C4;&#x8303;">golang&#x4EE3;&#x7801;&#x4E66;&#x5199;&#x89C4;&#x8303;</h3>
<ul>
<li><a href="https://draveness.me/golang-101" target="_blank">&#x5982;&#x4F55;&#x5199;&#x51FA;&#x4F18;&#x96C5;&#x7684;golang&#x4EE3;&#x7801;</a></li>
<li><a href="https://github.com/senghoo/golang-design-pattern/blob/master/README.md" target="_blank">golang&#x8BBE;&#x8BA1;&#x6A21;&#x5F0F;</a></li>
<li><a href="https://yanyangcode.wordpress.com/2016/06/28/first-blog-post/" target="_blank">&#x5B9E;&#x7528;go&#x8BED;&#x8A00;&#x5355;&#x5143;&#x6D4B;&#x8BD5;&#x4E2D;&#x7684;&#x63A5;&#x53E3;&#x53CA;&#x5176;&#x590D;&#x5408;&#xFF08;&#x4E00;&#xFF09;</a></li>
<li><a href="https://github.com/golang/go/wiki/CodeReviewComments" target="_blank">golang&#x5B98;&#x65B9;&#x4E66;&#x5199;&#x89C4;&#x8303;</a></li>
</ul>
<h3 id="gomock">gomock</h3>
<ul>
<li><p><a href="https://zhuanlan.zhihu.com/p/63073179" target="_blank">golang&#x5355;&#x5143;&#x6D4B;&#x8BD5;&#x5B9E;&#x8DF5;</a></p>
</li>
<li><p><a href="https://www.cnblogs.com/rinson/p/6520602.html" target="_blank">&#x5355;&#x5143;&#x6D4B;&#x8BD5;&#x7684;&#x7406;&#x89E3;</a></p>
</li>
<li><a href="https://blog.csdn.net/moshenglv/article/details/79610986" target="_blank">&#x5355;&#x5143;&#x6D4B;&#x8BD5;&#x7528;&#x4F8B;&#x7F16;&#x5199;&#x603B;&#x7ED3;</a></li>
<li><a href="https://www.jianshu.com/p/696cd57bf18d" target="_blank">&#x6D45;&#x6790;Mock&#xFF0C;Fake&#x548C;Stub&#x5728;&#x6D4B;&#x8BD5;&#x4E2D;&#x7684;&#x5E94;&#x7528;</a></li>
<li><a href="https://zhuanlan.zhihu.com/p/37867687" target="_blank">Gopher &#x4E0A;&#x624B;&#x6307;&#x5357;&#xFF1A;&#x7B2C;&#x5341;&#x4E00;&#x671F;</a></li>
<li><a href="https://www.ibm.com/developerworks/cn/linux/l-tdd/" target="_blank">&#x6D45;&#x8C08;&#x6D4B;&#x8BD5;&#x9A71;&#x52A8;&#x5F00;&#x53D1;TDD</a></li>
<li><p><a href="https://hustyichi.github.io/2018/11/24/mock/" target="_blank">&#x5355;&#x5143;&#x6D4B;&#x8BD5;mock&#x6A21;&#x5757;&#x4ECB;&#x7ECD;</a></p>
</li>
<li><p><a href="https://testerhome.com/topics/6374" target="_blank">&#x4E91;&#x5E73;&#x53F0;&#x4E0B;Go&#x8BED;&#x8A00;&#x5355;&#x5143;&#x6D4B;&#x8BD5;&#x5B9E;&#x8DF5;</a></p>
</li>
<li><a href="https://zhuanlan.zhihu.com/p/45570168" target="_blank">Golang &#x5355;&#x5143;&#x6D4B;&#x8BD5;&#x6846;&#x67B6; gocheck &#x4F7F;&#x7528;&#x4ECB;&#x7ECD;</a></li>
<li><a href="https://github.com/golang/mock/tree/master/sample" target="_blank">gomock</a></li>
<li><a href="https://juejin.im/post/5ce9354b5188252a72407ac5" target="_blank">&#x641E;&#x5B9A;golang&#x5355;&#x5143;&#x6D4B;&#x8BD5;--mock&#x6846;&#x67B6;</a></li>
<li><a href="https://zhuanlan.zhihu.com/p/45570168" target="_blank">gocheck</a></li>
<li><a href="https://www.cnblogs.com/yjf512/p/10905352.html" target="_blank">golang&#x9879;&#x76EE;&#x7684;&#x6D4B;&#x8BD5;&#x5B9E;&#x8DF5;</a></li>
<li><a href="https://yanyangcode.wordpress.com/2016/06/28/first-blog-post/" target="_blank">&#x5B9E;&#x7528;go&#x8BED;&#x8A00;&#x5355;&#x5143;&#x6D4B;&#x8BD5;&#x4E2D;&#x7684;&#x63A5;&#x53E3;&#x53CA;&#x5176;&#x590D;&#x5408;&#xFF08;&#x4E00;&#xFF09;</a></li>
<li><a href="[https:/1994.github.io/p3c/%E5%8D%95%E5%85%83%E6%B5%8B%E8%AF%95.html](https:/1994.github.io/p3c/&#x5355;&#x5143;&#x6D4B;&#x8BD5;.html">&#x963F;&#x91CC;&#x5DF4;&#x5DF4;Java&#x5F00;&#x53D1;&#x8005;&#x624B;&#x518C;-&#x5355;&#x5143;&#x6D4B;&#x8BD5;</a>)</li>
</ul>
<h3 id="httptest">httptest</h3>
<ul>
<li><a href="https://blog.csdn.net/lavorange/article/details/73369153" target="_blank">Golang&#x5355;&#x5143;&#x6D4B;&#x8BD5;&#x4E4B;httptest&#x4F7F;&#x7528;</a></li>
<li><a href="https://blog.questionable.services/article/testing-http-handlers-go/" target="_blank">Testing Your (HTTP) Handlers in Go</a></li>
<li><a href="https://www.jianshu.com/p/21571fe59ec4" target="_blank">golang web&#x5F00;&#x53D1; Handler&#x6D4B;&#x8BD5;&#x5229;&#x5668;httptest</a></li>
</ul>
<h3 id="&#x4F9D;&#x8D56;&#x6CE8;&#x5165;">&#x4F9D;&#x8D56;&#x6CE8;&#x5165;</h3>
<ul>
<li><a href="https://segmentfault.com/a/1190000016140106" target="_blank">golang&#x4E2D;&#x7684;&#x4F9D;&#x8D56;&#x6CE8;&#x5165;</a></li>
<li><a href="https://github.com/google/wire/blob/master/_tutorial/README.md" target="_blank">&#x4F9D;&#x8D56;&#x6CE8;&#x5165;Wire</a></li>
</ul>
<h3 id="interface">interface</h3>
<ul>
<li><a href="https://sanyuesha.com/2017/07/22/how-to-understand-go-interface/" target="_blank">&#x7406;&#x89E3; Go interface &#x7684; 5 &#x4E2A;&#x5173;&#x952E;&#x70B9;</a></li>
</ul>

                                
                                </section>
                            
    </div>
    <div class="search-results">
        <div class="has-results">
            
            <h1 class="search-results-title"><span class='search-results-count'></span> results matching "<span class='search-query'></span>"</h1>
            <ul class="search-results-list"></ul>
            
        </div>
        <div class="no-results">
            
            <h1 class="search-results-title">No results matching "<span class='search-query'></span>"</h1>
            
        </div>
    </div>
</div>

                        </div>
                    </div>
                
            </div>

            
                
                
            
        
    </div>

    <script>
        var gitbook = gitbook || [];
        gitbook.push(function() {
            gitbook.page.hasChanged({"page":{"title":"单元测试文档","level":"1.11.1","depth":2,"next":{"title":"计算机科学","level":"1.12","depth":1,"ref":"","articles":[{"title":"堆/栈","level":"1.12.1","depth":2,"path":"CS/Heap&Stack.md","ref":"CS/Heap&Stack.md","articles":[]}]},"previous":{"title":"单元测试","level":"1.11","depth":1,"ref":"","articles":[{"title":"单元测试文档","level":"1.11.1","depth":2,"path":"unitTest/utdoc.md","ref":"unitTest/utdoc.md","articles":[]}]},"dir":"ltr"},"config":{"plugins":["mermaid-gb3","splitter","expandable-chapters","-lunr","-search","search-pro","code","github","back-to-top-button","livereload"],"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"pluginsConfig":{"github":{"url":"https://github.com/noobcoderr"},"livereload":{},"splitter":{},"search-pro":{},"code":{"copyButtons":true},"fontsettings":{"theme":"white","family":"sans","size":2},"highlight":{},"mermaid-gb3":{},"back-to-top-button":{},"sharing":{"facebook":true,"twitter":true,"google":false,"weibo":false,"instapaper":false,"vk":false,"all":["facebook","google","twitter","weibo","instapaper"]},"theme-default":{"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"showLevel":false},"expandable-chapters":{}},"theme":"default","author":"noobcoderr","describtion":"记录个人学习，总结，各种杂七杂八的知识","pdf":{"pageNumbers":true,"fontSize":12,"fontFamily":"Arial","paperSize":"a4","chapterMark":"pagebreak","pageBreaksBefore":"/","margin":{"right":62,"left":62,"top":56,"bottom":56}},"structure":{"langs":"LANGS.md","readme":"README.md","glossary":"GLOSSARY.md","summary":"SUMMARY.md"},"variables":{},"title":"Tools Collections","language":"zh-hans","gitbook":"*"},"file":{"path":"unitTest/utdoc.md","mtime":"2019-08-07T09:49:07.562Z","type":"markdown"},"gitbook":{"version":"3.2.3","time":"2019-09-04T05:04:56.650Z"},"basePath":"..","book":{"language":""}});
        });
    </script>
</div>

        
    
    <script src="../gitbook/gitbook.js"></script>
    <script src="../gitbook/theme.js"></script>
    
        
        <script src="../gitbook/gitbook-plugin-mermaid-gb3/book/plugin.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-splitter/splitter.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-expandable-chapters/expandable-chapters.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-search-pro/jquery.mark.min.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-search-pro/search.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-code/plugin.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-github/plugin.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-back-to-top-button/plugin.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-livereload/plugin.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-sharing/buttons.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-fontsettings/fontsettings.js"></script>
        
    

    <script src="../gitbook/gitbook-plugin-mermaid-gb3/mermaid/mermaid.min.js"></script>

    </body>
</html>

